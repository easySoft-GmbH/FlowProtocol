\documentclass[12pt ,a4paper]{article}
\usepackage[ansi]{umlaute}
\usepackage[german]{babel}
\usepackage[T1]{fontenc}
\usepackage{fancyhdr}
\usepackage{geometry}
\usepackage{mathptm}
\title{FlowProtocol - Anwenderhandbuch}
\author{Wolfgang Maier}
%%
%% Layout
%%
\setlength{\parindent}{0mm}
\setlength{\parskip}{0.5ex plus0.2ex minus0.1ex}
\geometry{lmargin=35mm,rmargin=25mm,tmargin=25mm,bmargin=25mm}
\addtolength{\headheight}{2.5pt}
\pagestyle{fancy}
\renewcommand{\sectionmark}[1]{\markboth{\thesection.~#1}{}}
%\setlength{\headrulewidth}{0pt}
\rhead{\thepage}
\cfoot{}
%%
%% Commands
%%
\newcommand{\FlowProtocol}{\textit{FlowProtocol}\ }
\newcommand{\Syntax}{\subsubsection*{Syntax}}
\newcounter{bspcount}
\newcommand{\Beispiel}{\stepcounter{bspcount}\subsubsection*{Beispiel~\arabic{bspcount}}}
\newcommand{\webbox}[1]{\nopagebreak\par\setlength{\fboxsep}{3mm}\fbox{\begin{minipage}{12cm}\textsf{#1}\end{minipage}\par}\par\vspace{3mm}}
\newcommand{\webhead}[2]{{\large  #1}\\[2mm]#2\\[1mm]\rule{\linewidth}{1pt}\\[3mm]}
\newcommand{\webheadR}[1]{{\large  #1}\\}
\newcommand{\fpinputbox}{\fbox{\rule[-1mm]{0mm}{4mm}\hspace*{6cm}}\\[2mm]}
\newcommand{\qsection}[1]{\vspace*{1mm}\textbf{\large #1}\\}
\newenvironment{circlist}%
{\begin{list}{$\bigcirc$}{%
\setlength{\labelsep}{5pt}
\setlength{\topsep}{5pt}
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\labelwidth}{1cm}
}}{\end{list}}
\newcounter{lcount}
\newenvironment{numlist}%
{\begin{list}{\textrm{\arabic{lcount}}}{\usecounter{lcount}%
\setlength{\labelsep}{5pt}
\setlength{\topsep}{5pt}
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\labelwidth}{1cm}
}}{\end{list}}
\newenvironment{helplist}%
{\itshape\begin{list}{$\cdot$}{%
\setlength{\labelsep}{5pt}
\setlength{\topsep}{5pt}
\setlength{\itemsep}{0pt}
\setlength{\parsep}{0pt}
\setlength{\labelwidth}{5mm}
}}{\end{list}}
\newcommand{\ZeigeFehlerItem}[4]{\item\textbf{#1}\\#2\ \textsl{#3}\\\texttt{#4}}
\newcommand{\FehlerBeschreibungItem}[2]{\item[#1]\textsl{#2}\\}
\newcommand{\SysVar}[2]{\item[\$#1]\textsl{#2}}
\begin{document}
\maketitle
\tableofcontents
\newpage
\section{Beschreibung und Hintergrund}
\subsection{Grundidee}
\FlowProtocol ist eine Anwendung, mit der man Aufgaben-, bzw. Prüflisten zu ausgewählten Themengebieten anhand einfacher Kontrollfragen erstellen kann. Der Name leitet sich ab aus Flow für \glqq Flussdiagramm\grqq\   und \glqq Protokoll\grqq\   und steht für das Grundkonzept der Anwendung, anhand eines verzweigten Entscheidungsbaums ein Protokoll zusammenzustellen. Die Anwendung funktioniert dabei wie folgt:  Nach Auswahl einer Vorlage wird eine Reihe von Multiple-Choice-Fragen gestellt, mit denen die relevanten Aspekte eines Themas Schritt für Schritt eingegrenzt werden, und aus denen am Ende eine genau abgestimmte Auf"|listung von Punkten zusammengestellt wird, die beispielsweise als Protokoll verwendet werden können.

Die Grundidee der Anwendung besteht darin, ein Medium zu bieten, um Spezialwissen ohne großen Aufwand zu erfassen und es dann in sehr einfacher Form für andere bereitzustellen, ohne dass es dafür vermittelt und erworben werden muss. Die Erstellung der Vorlagen kann und soll direkt durch die Menschen erfolgen, die über das jeweilige Wissen verfügen und die Anwendung für alle möglich sein, die dieses Wissen benötigen.

\subsection{Anwendungsbereiche}
Die Anwendungsbereiche für diese Anwendung sind sehr vielfältig. Die ursprüngliche Intention war die Aufstellung von Prüflisten für wiederkehrende komplexe Tätigkeiten, die in vielen einzelnen Aspekten variieren können, sodass jeweils nur eine bestimmte Auswahl von Prüfpunkten relevant ist. Eine Gesamtprüfliste, bei der immer ein Großteil der Punkte hätte ignoriert werden müssen, wäre sowohl aufwendig, als auch fehlerträchtig, und daher nicht effektiv. \FlowProtocol kann hier durch sein Fragekonzept die für jeden Einzelfall relevanten Aspekte herausfiltern, und auf diese Weise sogar beliebig stark ins Detail gehen. Gleichzeitig hilft dem Anwender die Beantwortung der Fragen auch, sich gedanklich ausführlich mit seiner Aufgabe auseinanderzusetzen. Durch die Vermeidung offener Fragen wird gleichzeitig das Risiko minimiert, dass Dinge vergessen werden. Das Ergebnis ist ein zu 100\% relevantes und vollständiges Protokoll.

Ein besonders positiver Nebeneffekt bei der Nutzung von Vorlagen besteht darin, dass durch einfaches Auswählen von Antworten am Ende ein Ergebnisdokument entsteht, das nicht mehr manuell erstellt werden muss. Das Anwendungsgebiet dehnt sich damit prinzipiell auf alle Arten von Dokumenten aus, die sich aus einer Aufzählung von Textbausteinen zusammensetzen und deren Zusammenstellung über eine Reihe iterierter Fragen erfolgen kann. Dies umfasst beispielsweise Bestandsaufnahmen, Analyseprotokolle, Zusammenfassungen, Aufgabenlisten und vieles andere mehr. Für kleinere Systeme lassen sich sogar mit überschaubarem Aufwand Vorlagen erstellen, die nicht nur das Ergebnis einer Analyse zusammenfassen, sondern ergänzend dazu auch schon Lösungsansätze und mögliche weitere Schritte beschreiben. Man kann so vom Prinzip her ein kleines Expertensystem erstellen, das wertvolles Spezialwissen eines Experten in sehr einfacher Form für andere Mitarbeiter verfügbar macht, ähnlich wie ein Chatbot. Das schont wertvolle Unternehmensressourcen und beugt Verfügbarkeitsengpässen vor. 

Eine besonders nützliche Anwendung ist die Erstellung von interaktiven Anleitungen. Hierbei werden ebenfalls Rahmenbedigungen und einzelne Textbausteine im Vorfeld abgefragt, und in Abhängigkeit davon die für den vorliegenden Fall relevanten Schritte der Anleitung ausgegeben. Die Möglichkeit, kontextbezogene und durch Textersetzungen angepasste Codepassagen in die Ausgabe einzufügen, macht \FlowProtocol zu einem besonders nützlichen Werkzeug in der Softwareentwicklung, wo derartige wiederkehrende Muster zum Tagesgeschäft gehören. Die Kombination von Anleitung und Codegenerator erhöht nicht nur die Effizient, sondern auch die Qualität.

Auch kleinere personalisierte Umfragen lassen sich über Vorlagen realisieren, wenn man die Teilnehmer zur Rücksendung der Ergebnisse instruiert. Es gibt sogar einen Befehl, der bei der Rangfolgenbestimmung von kleineren Listen unterstützt, indem die darin vorkommenden Elemente paarweise gegenübergestellt werden (siehe Abschnitt~\ref{Rangfolgenbestimmung}). 
Für wichtige Rangfolgen wie beispielsweise Projektprioritäten ist es natürlich besser, man hat detaillierte und bewährte Kriterien, die sich objektiv auf alle Elemente der Liste anwenden lassen, und die am Ende über einen Zahlenwert zu einer Rangfolge oder Auswahl führen. Auch solche Bewertungen lassen sich mit \FlowProtocol sehr leicht umsetzen und für alle verfügbar machen.

\subsection{Konfiguration}
\FlowProtocol ist bewusst einfach gehalten und soll es auch bleiben. Als Web-Anwendung kann der Dienst innerhalb einer Einrichtung zentral zur Verfügung gestellt werden. Die einzige notwendige Konfiguration ist die Angabe eines serverseitig verfügbaren Vorlagenordners, in dem sich die Vorlagen befinden (einstellbar über die Eigenschaft TemplatePath in der Datei appsettings.json). Es werden weder Datenbank noch zusätzliche Dienste benötigt. Die Vorlage-Dateien sind normale Textdateien (in UTF-8-Codierung), die die eigentliche Logik enthalten, und die über die Anwendung ausgeführt werden. Die Syntax der Vorlage-Dateien ist ebenfalls sehr einfach und bewusst für die manuelle Erstellung in einem Editor vorgesehen. Der Aufbau ist zeilenbasiert und verwendet Einrückung zur Abbildung der Verschachtelung. Die Erstellung einer ersten eigenen Vorlage ist innerhalb von 2 Minuten möglich. Eine ausführliche Beschreibung des Sprachumfangs wird in der Befehlsreferenz gegeben. Das Ergebnis einer Bearbeitung wird am Ende auf dem Bildschirm ausgegeben, von wo aus es in die Zwischenablage übernommen werden kann. Tatsächlich wird in den meisten Fällen eine Weiterverarbeitung in einem anderen System (E-Mail, CRM, Projektverwaltung) erfolgen, wo noch Begriffe ergänzt und Prozesse angestoßen werden können und eine revisionssichere Verwaltung möglich ist.

Die Organisation der Vorlagen erfolgt auf zwei Ebenen. Auf unterster Ebene ist eine Unterteilung in Anwendergruppen vorgesehen, die jeweils ihre eigenen Vorlagen verwenden. In einem Unternehmen oder einer Einrichtung wird sich diese Aufteilung normalerweise am Mitarbeiterorganigramm orientieren. Ein Beispiel wäre die Aufteilung in Vertrieb, Marketing, Entwicklung, Administration. Jeder Ordner im Vorlagenordner wird in \FlowProtocol als Anwendergruppe auf der Seite Anwendergruppen angezeigt. Innerhalb dieser Ordner kann man die Vorlagen entweder direkt ablegen oder in weitere Unterordner unterteilen, um fachliche Gruppen zu bilden. Der Pfad einer Vorlage innerhalb dieser Struktur findet sich auch in der URL wieder, die innerhalb der Anwendung erzeugt wird, und kann so auch direkt als Link in einer E-Mail, einem Vorgang, im Wiki oder an einer anderen Stelle im Intranet bereitgestellt werden. Der Aufruf führt somit sofort zur Ausführung der gewünschten Vorlage, ohne dass diese über das Menü ausgewählt werden muss.

Eine weitere Aufteilung kann innerhalb einer Vorlage realisiert werden, z.B.\ indem man dort auf oberster Ebene mit einem Menü oder einer Einstiegsfrage \glqq Was möchten Sie tun?\grqq beginnt. Für jede Auswahl kann wieder praktisch eine eigene Vorlage ausgeführt werden. Auch hier wird die Menüauswahl in der URL verwaltet und kann über Links oder Lesezeichen übermittelt oder gespeichert werden.

\subsection{Technische Ergänzungen}

\FlowProtocol basiert auf den .NET-Framework 6.01 und kann sowohl unter Windows, als auch Linux ausgeführt werden. Der Umgang mit Dateipfaden und Zeilenumbruchzeichen wurde für beide Systeme kompatibel gehalten.
Die Anwendung arbeitet vollständig zustandslos in dem Sinne, dass bei der Benutzung keinerlei Daten durch die Anwendung gespeichert werden. Es gibt weder eine Datenbank, noch eine Benutzerverwaltung und der Zugriff auf das Dateisystem erfolgt nur lesend. Die Verwaltung der gegebenen Antworten erfolgt vollständig in der URL, was die Möglichkeit bietet, zurückzuspringen oder einen Zwischenstand als Lesezeichen zu speichern oder zu versenden, allerdings werden Aufrufe von URLs in Unternehmen teilweise durch die IT-Infrastruktur protokolliert, sodass eine Verarbeitung schützenswerter Daten auf jeden Fall dahingehend betrachtet werden sollte.

\FlowProtocol steht unter der MIT Lizenz und ist unter 
\begin{quote}
\texttt{https://github.com/maier-san/FlowProtocol} 
\end{quote}
frei verfügbar.
\par\vspace{7mm}
Viel Freude beim Erstellen von Vorlagen und deren Anwendung!

\newpage
\section{Befehlsreferenz}
\subsection{Grundlagen des Dateiaufbaus}
Vorlagendateien können in einem beliebigen Texteditor erstellt werden. Die sehr einfache Sprache verlangt weder Syntax-Hervorhebung, noch Auto-Ergänzung, wobei letzteres bei dem von mir für das Windows-Betriebssystem empfohlenen Editor Notepad++ schon in einem sehr komfortablen Maße gegeben ist.
Als Dateiendung für eine Vorlagendatei muss \glqq .qfp\grqq\  (Quick Flow Protocol) gewählt werden, damit die Datei über die Anwendung aufrufbar ist.

Im Allgemeinen wird die Groß-Klein-Schreibung berücksichtigt, z.B. bei Schlüsseln, Befehlen und Variablen. Bei der Verwendung von Text mit Umlauten sollte darauf geachtet werden, dass diese innerhalb der Anwendung korrekt dargestellt werden. In meiner Umgebung war dies mit der Kodierung UFT-8 der Fall.

Die Verschachtelung der Struktur wird durch Einrückung abgebildet. Hier kann wahlweise mit Tabulator- oder Leerzeichen gearbeitet werden, jedoch sollte dies einheitlich geschehen, da die Struktur bei einer Durchmischung unter Umständen nicht mehr korrekt aufgelöst wird. Die Anwendung ersetzt Tabulatorzeichen durch vier Leerzeichen, unabhängig von ihrer Position.
Die Interpretation einer Datei erfolgt zeilenweise, d.h. jeder Zeilenumbruch schließt einen Befehl ab. Der Einsatz von Zeilenumbrüchen zur Formatierung ist damit nicht möglich.
Leerzeilen werden bei der Verarbeitung ignoriert und können in beliebiger Menge eingefügt werden.

\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
    #a2: In Großbuchstaben
        >> HALLO WELT
    #a3: Rückwärts
        >> tleW ollaH
\end{verbatim}
Diese Vorlage führt zu folgender Ausgabe:
\webbox{
\webhead{Vorlage Demo, 01 HalloWelt}{Formatierte Hallo-Welt-Ausgabe}
Wie soll \dq Hallo Welt\dq ausgegeben werden?
\begin{circlist}
\item Ganz normal
\item In Großbuchstaben
\item Rückwärts
\end{circlist}
}
Der Anwender kann nun eine der drei Antwortmöglichkeiten wählen, und die Bearbeitung mit der Weiter-Taste fortsetzen, bzw.\ in diesem Fall abschließen. 

Wenn man zum Beispiel die zweite Antwortmöglichkeit \glqq In Großbuchstaben\grqq, so sieht das Ergebnis wie folgt aus:
\webbox{
\webheadR{Vorlage Demo, 01 HalloWelt}
\begin{numlist}
\item HALLO WELT
\end{numlist}
}

\subsection{Beschreibungstexte}
\begin{verbatim}
/// <Beschreibungstext>
\end{verbatim}
Diese Angabe ist nur in der äußersten Ebene einer Vorlagendatei wirksam. Es können mehrere Zeilen dieser Art angegeben werden. 

Der angegebene Beschreibungstext wird bei der Darstellung von Fragen im Kopfbereich ausgegeben.
Damit lässt sich einem oder mehreren Sätzen kurz beschreiben, wozu die Vorlage dient, zu welchem Zweck sie eingesetzt werden kann.

\subsection{Kommentare}
\Syntax
\begin{verbatim}
// <Kommentar>
\end{verbatim}
Diese Kommentare werden bei der Verarbeitung durch die Anwendung vollständig ignoriert und dienen ausschließlich zur Kommentierung des Vorlagencodes.

\subsection{Frage, Antworten und Ausgaben}
\Syntax
\begin{verbatim}
?<Frageschlüssel>: <Fragetext>
    #<Schlüssel Antwortmöglichkeit 1>: <Text Antwortmöglichkeit 1>
        >> <Text Ausgabe 1>
    #<Schlüssel Antwortmöglichkeit 2>: <Text Antwortmöglichkeit 2>
        >> <Text Ausgabe 2>
    . . .
\end{verbatim}
Das Kernelement der Vorlagen sind Fragen. Diese bestehen aus einem Frageschlüssel und einem Fragetext. Die Schlüssel für Fragen und Antwortmöglichkeiten werden verwendet, um die gegebenen Antworten innerhalb der URL zu verwalten. Sie dürfen nur aus Buchstaben und Zahlen bestehen und sollten möglichst kurz gewählt werden. Die Schlüssel der Fragen müssen über die komplette Vorlage eindeutig sein, die der Antworten nur innerhalb einer Frage.

An der Oberfläche dargestellt wird nur der Fragetext und die Texte der Antwortmöglichkeiten.

Durch\texttt{ >>} wird ein Ausgabeeintrag erzeugt, wenn die entsprechende Antwortmöglichkeit gewählt wurde. Die Ausgaben werden als nummerierte Liste zu einem Ergebnis zusammengefasst.

\subsection{Sequenzen}
Mehrere Fragen können hintereinander aufgelistet werden. Diese werden standardmäßig untereinander auf einer Seite aufgelistet und können zusammen bearbeitet werden.
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
    #a2: In Großbuchstaben
        >> HALLO WELT
    #a3: Rückwärts
        >> tleW ollaH
?F2: Welcher Zusatz soll ergänzt werden?
    #z1: "Wie geht es dir?"
        >> Wie geht es dir?
    #z2: "Ich grüße dich!"
        >> Ich grüße dich!
\end{verbatim}
\webbox{
Wie soll \dq Hallo Welt\dq ausgegeben werden?
\begin{circlist}
\item Ganz normal
\item In Großbuchstaben
\item Rückwärts
\end{circlist}
Welcher Zusatz soll ergänzt werden?
\begin{circlist}
\item \dq Wie geht es dir?\dq
\item \dq Ich grüße dich\dq
\end{circlist}
}
Die Benutzerführung erlaubt es, auch nur einen Teil der angezeigten Fragen zu beantworten und dann die Weiter-Schaltfläche zu betätigen. In diesem Fall werden die nicht beantworteten Fragen einfach auf der Folgeseite erneut angezeigt.

\subsection{Verschachtelungen}\label{Verschachtelungen}
Die Verschachtelung von Fragen ist das Hauptprinzip der Anwendung. Auf diese Weise kann gezielt ins Detail gegangen werden, wenn der entsprechende Fall vorliegt, und man kann Fragen weglassen, wenn sie nicht relevant sind.
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
    #a2: In Großbuchstaben
        ?F1a: Text zusätzlich rückwärts ausgeben?
            #j: Ja
                >> TLEW OLLAH
            #n: Nein
                >> HALLO WELT
    #a3: Rückwärts
        >> tleW ollaH
\end{verbatim}
Die Darstellung ist zunächst identisch mit der des Ausgangsbeispiels. Die innere Frage wird erst und nur dann angezeigt, wenn in der ersten Ebene die Antwortmöglichkeit \glqq In Großbuchstaben\grqq\  gewählt wird.
\webbox{
Soll \dq Hallo Welt\dq zusätzlich rückwärts ausgegeben werden?
\begin{circlist}
\item Ja
\item Nein
\end{circlist}
}

\subsection{Gruppierungen}\label{Gruppierungen}
Das Ergebnis einer Bearbeitung kann in vielen Fällen mehr als eine Liste sein. Eine Vorlage zur Analyse kann zum einen den Ist-Stand erfassen, mögliche Lösungsansätze formulieren und die noch ausstehenden Analyse-Maßnahmen auf"|listen. Zu diesem Zweck können die Ausgaben in einer sehr einfachen Form gruppiert werden.

\Syntax
\begin{verbatim}
>> <Gruppe> >> <Text Ausgabe>
\end{verbatim}
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Deine Ausgabe >> Hallo Welt
        >> Die Alternativen >> HALLO WELT
        >> Die Alternativen >> tleW ollaH
    #a2: In Großbuchstaben
        >> Deine Ausgabe >> HALLO WELT
        >> Die Alternativen >> Hallo Welt
        >> Die Alternativen >> tleW ollaH
    #a3: Rückwärts
        >> Deine Ausgabe >> tleW ollaH
        >> Die Alternativen >> Hallo Welt
        >> Die Alternativen >> HALLO WELT
\end{verbatim}
Wählt man die Antwortmöglichkeit \glqq In Großbuchstaben\grqq, so erhält man die folgende Ausgabe:
\webbox{
\webheadR{Ergebnisliste (Demo, 05 Gruppierungen)}\\
Deine Ausgabe
\begin{numlist}
\item HALLO WELT
\end{numlist}
Die Alternativen
\begin{numlist}
\item Hallo Welt
\item tleW ollaH
\end{numlist}
}
\subsection{Unterpunkte}\label{Unterpunkte}
Ausgaben können je nach Vorlage selbst wieder Tätigkeiten oder Aufgaben beschreiben, die sich aus verschiedenen Schritten zusammensetzen, oder bei denen mehrere Teilaspekte zu berücksichtigen sind. Diese lassen sich in Form von Unterpunkten auf"|listen. Ein Unterpunkt, der mit der Protokollkennung \glqq https://\grqq\  beginnt und als Link erkannt wird, wird dabei in der Ausgabe als ausführbarer Link dargestellt. Man kann sogar ganze Codeblöcke als Unterpunkt formatieren (siehe Abschnitt~\ref{Codebloecke}).

\Syntax
\begin{verbatim}
>> <Ausgabe Text>
    > <Unterpunkt Text 1>
    > <Unterpunkt Text 2>
    . . . 
\end{verbatim}
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt            
    #a2: In Großbuchstaben
        >> HALLO WELT
            > Mehr Infos findest du hier:
            > https://github.com/maier-san/FlowProtocol
    #a3: Rückwärts
        >> tleW ollaH
\end{verbatim}
Wählt man die Antwortmöglichkeit \glqq In Großbuchstaben\grqq, so erhält man die folgende Ausgabe:
\webbox{
\webheadR{Ergebnisliste (Demo, 06 Unterpunkte)}
\begin{numlist}
\item HALLO WELT
\begin{itemize}
\item Mehr Infos findest du hier:
\item \texttt{https://github.com/maier-san/FlowProtocol}
\end{itemize}
\end{numlist}
}
\subsection{Wiederholungen}
Eine Frage kann an anderer Stelle wiederholt gestellt werden. Ausschlaggebend dafür ist, dass der Schlüssel der Frage identisch mit einem bereits verwendeten Schlüssel ist. Ist die Antwort auf die Frage bei der Bearbeitung zu diesem Zeitpunkt bereits gegeben, so wird die Fragestellung nicht mehr angezeigt und direkt der jeweilige Antwortzweig verarbeitet. Wenn das aufgrund der Anordnung zwingend der Fall ist, können die Texte abgekürzt werden, da sie ja nicht ausgegeben werden. In diesem Fall empfiehlt es sich zur Verbesserung der Übersichtlichkeit, in den Texten kenntlich zu machen, dass es sich um eine Wiederholung handelt.

\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
    #a2: In Großbuchstaben
        >> HALLO WELT
    #a3: Rückwärts
        >> tleW ollaH
?F2: Welcher Zusatz soll ergänzt werden?
    #z1: "Wie geht es dir?"
        ?F1: Wdh. Wie soll "Hallo Welt" ausgegeben werden?
            #a2: In Großbuchstaben
                >> WIE GEHT ES DIR?
            #x: sonst
                >> Wie geht es dir?
    #z2: "Ich grüße dich!"
        >> Ich grüße dich!
\end{verbatim}
Bei der Wiederholung einer Frage können auch nur Teile der ursprünglichen Antwortmöglichkeiten gegeben werden. Wird darunter die zuerst gegebene Antwort nicht gefunden, so wird keiner der Antwortzweige verarbeitet. Zur Vereinfachung kann jedoch mit dem Antwortschlüssel \texttt{\#x} eine Antwortmöglichkeit gegeben werden, die stellvertretend für alle anderen Antwortmöglichkeiten steht. Wird im obigen Beispiel also für F1 die Antwortmöglichkeit \texttt{\#a3} gewählt, so wird diese mit der Wiederholung der Frage dem Antwortschlüssel \texttt{\#x} zugeordnet.

\subsection{Implikationen}
Die Antwort auf eine Frage kann in manchen Fällen die Antwort auf eine andere implizieren. Dies kann mit dem \verb|~Implies|-Befehl abgebildet werden.

\Syntax
\begin{verbatim}
~Implies <Frageschlüssel 1>=<Antwortschlüssel 1>;  . . .
\end{verbatim}
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
    #a2: In Großbuchstaben
        >> HALLO WELT
        ~Implies F2a=j
    #a3: Rückwärts
        >> tleW ollaH
?F2: Welcher Zusatz soll ergänzt werden?
    #z1: "Wie geht es dir?"
        ?F2a: Soll der Zusatz mit Sternchen ausgegeben werden?
            #j: Ja
                >> *** Wie geht es dir? ***
            #n: Nein
                >> Wie geht es dir?
    #z2: "Ich grüße dich!"
        >> Ich grüße dich!
\end{verbatim}
Bei Auswahl der Antwort \glqq In Großbuchstaben\grqq\ für Frage \texttt{F1} wird für die Frage \texttt{F2a} die 
Antwort \glqq Ja\grqq\  impliziert. Diese wird dann nicht mehr gestellt, sondern automatisch beantwortet. Im Falle der anderen Antwortmöglichkeiten wird keine Antwort impliziert, sodass die Frage \texttt{F2a} in diesem Fall ganz normal gestellt und verarbeitet wird.

\subsection{Autonummerierung}\label{Autonummerierung}
Das Durchnummerieren der Frageschlüssel kann in umfangreichen Dateien sehr mühsam werden, da diese zumeist nicht von oben nach unten aufgebaut werden, sondern ausgehend von einer ersten Ebene Stück für Stück in die Tiefe. Die Kontrolle über die Schlüssel benötigt man aber nur, wenn man mit Implikationen oder Wiederholungen arbeitet, oder die Gültigkeit von Links auch nach Erweiterungen der Vorlage sicherstellen möchte. Für alle anderen Fälle kann man die Schlüssel automatisch vergeben lassen.
\Syntax
\begin{verbatim}
?<Frageschlüsselanfang>': <Fragetext>
\end{verbatim}
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F': Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
    #a2: In Großbuchstaben
        >> HALLO WELT
?F': Welcher Zusatz soll ergänzt werden?
    #z1: "Wie geht es dir?"
        >> Wie geht es dir?
    #z2: "Ich grüße dich!"
        >> Ich grüße dich!
\end{verbatim}
Die Apostrophzeichen in den Schlüsseln werden pro Datei durchnummeriert und im obigen Beispiel zu \verb|F_1| und \verb|F_2| ersetzt. Schlüssel ohne das \verb|'|-Zeichen bleiben unverändert und können für Implikationen oder Wiederholungen genutzt werden. Implikationen für automatisch nummerierte Schlüssel sind zwar ebenfalls möglich, aber aufgrund der fehlenden Transparenz keine gute Idee. 

Bei Verwendung von Funktionen (siehe Abschnitt~\ref{Funktionen}) erfolgt die Nummerierung dateiübergreifend und ist unabhängig von der Reihenfolge der Bearbeitung. Dafür wird die Nummerierung im Hintergrund in Form einer Gliederung aufgebaut, die bei tieferen Verschachtelungen eine größere Länge haben. Bei rekursiven Aufrufen mit beliebiger Tiefe wie in Abschnitt~\ref{ParametrisierteFunktionen} sollte man daher die Schlüssel lieber explizit mittels Parameter kontrollieren.

\subsection{Ausführungen}
Bei längeren Sequenzen und insbesondere bei der Verwendung von Wiederholungen und Implikationen ist es wünschenswert, zunächst einen Teil der Fragen vollständig abzuarbeiten, bevor die Fragen aus dem nachfolgenden Teil angezeigt werden. Dies ist mit dem \verb|~Execute|-Befehl möglich.
\Syntax
\begin{verbatim}
~Execute
\end{verbatim}
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
    #a2: In Großbuchstaben
        >> HALLO WELT
    #a3: Rückwärts
        >> tleW ollaH
~Execute
?F2: Welcher Zusatz soll ergänzt werden?
    #z1: "Wie geht es dir?"
        >> Wie geht es dir?
    #z2: "Ich grüße dich!"
        >> Ich grüße dich!
\end{verbatim}
Die beiden Fragen aus dem Sequenzen-Beispiel werden in diesem Fall einzelnen angezeigt.

\subsection{Funktionen}\label{Funktionen}
Vorlagen können mitunter sehr umfangreich und tief verschachtelt sein. Verwaltet man solche Vorlagen in einer einzigen Datei, kann das insbesondere aufgrund der Einrückungen sehr unübersichtlich werden, sodass sich Anpassungen und Erweiterungen schwierig gestalten. Hier ist es empfehlenswert, Teile des Codes als Funktionen in jeweils eigene Dateien auszulagern. Eine Funktion ist vom Prinzip und vom Aufbau her das gleiche wie eine Vorlage und wird über eine Datei der Endung \glqq *.qff\grqq\  (Quick Flow Function) bereitgestellt. Aufgrund der abweichenden Dateiendung werden Funktionen nicht als Vorlagen in der Anwendung zur Auswahl angeboten.

Die Funktionsdatei muss auf der gleichen Ebene liegen wie die Vorlage, die sie aufruft und der Name darf nur aus Buchstaben und Ziffern bestehen.

\Syntax
\begin{verbatim}
~Include <Name der Funktion>
\end{verbatim}
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
~Include HalloWelt1
\end{verbatim}
Mit der Funktionsdatei HalloWelt1.qff
\begin{verbatim}
//  Hallo-Welt-Funktion
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
    #a2: In Großbuchstaben
        >> HALLO WELT
    #a3: Rückwärts
        >> tleW ollaH
\end{verbatim}
Neben der Erhöhung der Übersichtlichkeit hat die Verwendung von Funktionen viele weitere Vorteile. Auf technischer Ebene vereinfacht es die Verarbeitung, da eine Funktion erst dann geladen wird, wenn der entsprechende Pfad auch tatsächlich erreicht wird. Aus Anwendersicht ergibt sich der große Vorteil, dass man eine Funktion in verschiedenen Antwortzweigen aufrufen kann, und damit keinen doppelten Code pflegen muss. Entsprechend lassen sich Funktionen auch aus verschiedenen Vorlagen heraus aufrufen, sodass fachliche Einheiten ausgelagert und mehrfach wieder verwendet werden können. Mit geteilten Funktionen geht dies sogar für Vorlagen aus verschiedenen Anwendungsgruppen-Ordnern (siehe Abschnitt~\ref{GeteilteFunktionen}).

\subsection{Parametrisierte Funktionen}\label{ParametrisierteFunktionen}
Möchte man eine Funktion innerhalb einer Vorlage mehrfach ausführen, so stößt man auf das Problem, dass die dort eingetragenen Frage-Schlüssel für beide Aufrufe identisch sind, und so der zweite Aufruf automatisch die Antworten des ersten Aufrufs übernehmen würde. Zudem wäre die Anzeige der Fragen identisch, sodass man diese beim Beantworten nicht den jeweiligen Aufrufen zuordnen könnten. Um dieses Problem zu lösen, lassen sich Aufrufe parametrisieren.

\Syntax
\begin{verbatim}
~Include <Name der Funktion> <Parameter 1>=<Wert 1>; . . .
\end{verbatim}
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
~Include HalloWelt2 weltindex=1; weltbezeichnung=Meine Welt
~Include HalloWelt2 weltindex=2; weltbezeichnung=Deine Welt
\end{verbatim}
Mit der Funktionsdatei HalloWelt2.qff
\begin{verbatim}
// Hallo-Welt-Funktion
// Parameter $weltindex: Schlüsselindex
// Parameter $weltbezeichnung: Weltbezeichnung
?F$weltindex1: Wie soll $weltbezeichnung begrüßt werden?
    #a1: Mit "Hallo"
        >> Hallo $weltbezeichnung
    #a2: Mit "Guten Morgen"
        >> Guten Morgen $weltbezeichnung
    #a3: Mit Aloah
        >> Aloah $weltbezeichnung
\end{verbatim}
Beim Aufrufen der Funktion HalloWert2 werden in jeder Zeile die mit dem \$-Zeichen gekennzeichneten Variablen durch die beim Aufruf zugeordneten Werte ersetzt. Da auch in den Frageschlüsseln die Variable \texttt{\$weltindex} integriert wurde, ergeben sich bei den beiden aufrufen unterschiedliche Frageschlüssel \texttt{F11} und \texttt{F21}, über die jeweils eigene Antworten verwaltet werden können. Die Texte der Fragen enthalten ebenfalls Variablen und sind damit klar zuzuordnen.

Es wird empfohlen die Parameter einer Funktion in Form von Kommentaren im Kopfbereich zu beschreiben.

Das obige Beispiel wird wie folgt angezeigt:
\webbox{
\webhead{Vorlage Demo, 11 Funktionen2}{Formatierte Hallo-Welt-Ausgabe}
Wie soll Meine Welt begrüßt werden?
\begin{circlist}
\item Mit \dq Hallo\dq
\item Mit \dq Guten Morgen\dq
\item Mit \dq Aloah\dq 
\end{circlist}
Wie soll Deine Welt begrüßt werden?
\begin{circlist}
\item Mit \dq Hallo\dq
\item Mit \dq Guten Morgen\dq
\item Mit \dq Aloah\dq 
\end{circlist}
}
Eine eindeutige Benennung der Schlüssel wäre auch automatisch möglich gewesen, jedoch auf Kosten der Möglichkeit, innerhalb einer Funktion wahlweise auch auf Fragen der aufrufenden Stelle zuzugreifen. Deshalb wurde hierauf verzichtet.

\subsection{Variablen}
Variablen können auch unabhängig von Funktionsparametern gesetzt und in Fragen, Antworten und Ausgaben verwendet werden. 

\Syntax
\begin{verbatim}
~Set <Variable 1>=<Wert 1>; <Variable 2>=<Wert 2>; . . .
\end{verbatim}
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
        ~Set Preis=5 Euro
    #a2: In Großbuchstaben
        >> HALLO WELT
        ~Set Preis=8 Euro
    #a3: Rückwärts
        >> tleW ollaH
        ~Set Preis=12 Euro
~Execute        
?F2: Soll der Preis von $Preis ausgegeben werden?
    #j: Ja
        >> Der Preis beträgt $Preis.
    #n: Nein
\end{verbatim}
Wird eine Variable in einer Frage oder Antwort verwendet, sollte durch die Struktur sichergestellt werden, dass die Frage, die für das Setzen der Variablen zuständig ist, zuvor ausgeführt wurde. Dies kann z.B. mit dem oben beschriebenen \verb|~Execute|-Befehl geschehen.

Variablen werden in umgekehrter alphanumerischen Reihenfolge ersetzt, so dass eine Variable \verb|$ab| nicht unbeabsichtgterweise innerhalb der Variablen \verb|$abc| ersetzt wird, wenn bei Variablen gesetzt sind.

\subsection{Additionen}\label{Additionen}
Über Variablen lassen sich auch einfache Additionen durchführen, beispielsweise um Kosten, Aufwände oder Komplexität zu ermitteln, die sich aus den gewählten Antwortmöglichkeiten zusammensetzen. Dies ist ebenfalls über den \verb|~Set|-Befehl möglich.
\Syntax
\begin{verbatim}
~Set <Variable 1>+=<Inkrement 1>;  . . .
\end{verbatim}
Additionen und Variablenzuweisungen können auch im gleichen \verb|~Set|-Befehl gemischt werden. Bei ihrer ersten Verwendung in einer Addition wird der Variablen zuvor ein Wert von 0 zugewiesen. Hat eine Variable bei der Verwendung in einer Addition bereits einen Wert, der nicht als natürliche Zahl interpretierbar ist, so wird die Addition ignoriert.
\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
        ~Set Preis=5
    #a2: In Großbuchstaben
        >> HALLO WELT
        ~Set Preis=8
    #a3: Rückwärts
        >> tleW ollaH
        ~Set Preis=12
?F2: Welcher Zusatz soll ergänzt werden?
    #z1: "Wie geht es dir?"
        >> Wie geht es dir?
        ~Set Preis+=3
    #z2: "Ich grüße dich!"
        >> Ich grüße dich!
        ~Set Preis+=7
?F3: Soll der Preis ausgegeben werden?
    #j: Ja
        >> Der Preis beträgt $Preis Euro.
    #n: Nein
\end{verbatim}

\subsection{Schleifen}\label{Schleifen}
In machen Fällen möchte man eine Funktion wiederholt für eine beliebige Menge an Elementen aufrufen. Dies ist möglich, indem man das Hochzählen von Variablen mit den Parameterzuweisungen eines rekursiven Funktionsaufrufes kombiniert.

\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
~Include HalloWelt3 weltindex=1
\end{verbatim}
Mit der Funktionsdatei HalloWelt3.qff
\begin{verbatim}
// Hallo-Welt-Funktion
// Parameter $weltindex: Schlüsselindex
?F$weltindex1: Wie soll Welt $weltindex begrüßt werden?
    #a1: Mit "Hallo"
        >> Hallo Welt $weltindex
    #a2: Mit "Guten Morgen"
        >> Guten Morgen Welt $weltindex
    #a3: Mit Aloah
        >> Aloah Welt $weltindex
?F$weltindex2: Wollen Sie noch eine Welt erfassen?
    #j: Ja
        ~Set dummy=$weltindex; dummy+=1
        ~Include HalloWelt3 weltindex=$dummy
    #n: Nein
\end{verbatim}
Man beachte, dass Additionen wie im \verb|~Set|-Befehl in den Zuweisungen des \verb|~Include|-Befehls selbst nicht möglich sind, da Include-Parameter anders verarbeitet werden als Variablen.

Das obige Beispiel wird wie folgt angezeigt:
\webbox{
\webhead{Vorlage Demo, 14 Schleifen}{Formatierte Hallo-Welt-Ausgabe}
Wie soll Welt 1 begrüßt werden?
\begin{circlist}
\item Mit \dq Hallo\dq
\item Mit \dq Guten Morgen\dq
\item Mit \dq Aloah\dq 
\end{circlist}
Wollen Sie noch eine Welt erfassen?
\begin{circlist}
\item Ja
\item Nein
\end{circlist}
}
Wählt man nacheinander Antworten und bestätigt die zweite Frage in den ersten beiden Durchläufen mit ja, bekommt man ein Ergebnis wie folgt:
\webbox{
\webheadR{Ergebnisliste (Demo, 13 Schleifen)}
\begin{numlist}
\item Guten Morgen Welt 1
\item Hallo Welt 2
\item Aloah Welt 3
\end{numlist}
}

\subsection{Eingaben}
In manchen Fällen kann es sinnvoll sein, kurze Texte oder einzelne Begriffe abzufragen, um diese als Bestandteil der Ausgabe zu verwenden. Insbesondere wenn man über eine Schleife eine Sequenz von Elementen abfragt, die man in der Ausgabe nicht nur als nummerierte, sondern benannte Aufzählung haben möchte. Dafür gibt es den \verb|~Input|-Befehl.

\Syntax
\begin{verbatim}
~Input  <Eingabeschlüssel>: <Fragetext>
\end{verbatim}
Der Schlüssel dient wie bei den Fragen zur Verwaltung der Eingabe in der URL, und der Fragetext wird an der Oberfläche angezeigt. Der Zugriff auf die Eingabe erfolgt wie bei Variablen über den Eingabeschlüssel, indem man das \$-Zeichen voranstellt. Eine Eingabe kann ebenso wie die Antwort auf eine Frage mit dem \verb|~Implies|-Befehl impliziert werden. Die Zeichenzahl ist pro Antwort auf maximal 50 Zeichen beschränkt, und aufgrund der beschränkten Zeichenzahl in der URL sollte diese Funktion nicht überstrapaziert werden.

\Beispiel
\begin{verbatim}
/// Es wird ein Wert abgefragt
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Möchtest du eine besondere Welt grüßen?    
    #j: Ja
        ~Input F2: Welche Welt möchtest du grüßen?
    #n: Nein
        ~Implies F2=Welt
~Execute
>> Hallo $F2!
\end{verbatim}
Wird im obigen Beispiel die Antwort  Ja gewählt, so wird im nächsten Schritt die Frage gestellt, welche Welt man grüßen möchte, mit der Möglichkeit einen Text einzugeben. Wählt man Nein, so wird die Frage implizit mit \glqq Welt\grqq\ beantwortet.
\webbox{
\webhead{Vorlage Demo, 19 Eingaben}{Es wird ein Wert abgefragt}
Welche Welt möchtest du grüßen?\\
\fpinputbox
}
\subsection{Codebloecke}\label{Codebloecke}
In der Softwareentwicklung und insbesondere bei der Weiterentwicklung großer Systeme gibt es zahlreiche Komponenten und Bausteine, die immer nach dem grundsätzlich selben Muster auf-, oder eingebaut werden. Oft gibt es dabei Varianten, bei denen man den einen oder anderen Aufruf mehr oder weniger benötigt, und die Benennung der Elemente muss ebenfalls angepasst werden. 
Es kann die Arbeit deutlich vereinfachen, wenn man mit \FlowProtocol eine Vorlage für eine Anleitung erstellt, die die relevanten Abhängigkeiten abfragt, und dem Entwickler die notwendigen Implementierungsschritte beschreibt. Noch besser ist es, wenn man eine Stufe weiter geht, und die einzelnen Codefragmente direkt durch die Vorlage erstellen lässt, so dass man diese ausschneiden und in den Produktivcode einfügen kann. Hierfür gibt es die Möglichkeit, ganze Codeblöcke ausgeben zu lassen.

Die Syntax ist ähnlich zu der der Unterpunkte (siehe Abschnitt~\ref{Unterpunkte}). Codeblöcke und Unterpunkte lassen sich auch innerhalb desselben Ausgabeeintrags kombinieren, die Ausgabe erfolgt jedoch blockweise, d.h.\ zuerst die Unterpunkte und dann der Codeblock.

\Syntax
\begin{verbatim}
>> <Ausgabe Text>
    >| <Codezeile 1>
    >| <Codezeile 2>
    . . . 
\end{verbatim}
Die Ausgabe erfolgt in einer Festbreitenschriftart und es werden auch führende Leerzeichen mit ausgegeben.

\Beispiel
\begin{verbatim}
/// Programmierunterstützung
/// Erstellungsroutine für einen Entitätsdatensatz
//  Anwendungsbeispiel für die Befehlsreferenz
~Input Entity: Wie wird die Entität benannt?
?F1: Von welchem Typ ist der Primärschlüssel?
    #i: Int
        ~Set PTyp=int;
    #G: Guid
        ~Set PTyp=Guid;
~Execute
>> Anleitung >> Implementiere die Funktion Erstelle$Entity()
    >|public $PTyp Erstelle$Entity()
    >|{
    >|   // Rufe generische Funktion auf
    >|   return ErstelleElement<$PTyp>()
    >|}
>> Anleitung >> Ergänze den Aufruf in der Geschäftslogik
    >|   $PTyp id = Erstelle$Entity()
\end{verbatim}

Wird im obigen Beispiel als Entitätsbennung \glqq Fahrzeug\grqq\ eingegeben und als Typ des Primärschlüssels \glqq int\grqq\ gewählt, so bekommt man folgende Ausgabe:
\webbox{
\webheadR{Ergebnisliste (Demo, 21 Codegen)}\\
Anleitung
\begin{numlist}
\item Implementiere die Funktion ErstelleFahrzeug()\\
\texttt{public int ErstelleFahrzeug()}\\
\texttt{\{}\\
\hspace*{2ex}\texttt{// Rufe generische Funktion auf}\\
\hspace*{2ex}\texttt{return ErstelleElement<int>()}\\
\texttt{\}}\\
\item Ergänze den Aufruf in der Geschäftslogik\\
\hspace*{2ex}\texttt{int id = ErstelleFahrzeug()}
\end{numlist}
}

\subsection{Geteilte Funktionen}\label{GeteilteFunktionen}
Manche Funktionen sind so allgemein, dass man sie anwendergruppenübergreifend verwenden, und deshalb auch zentral verwalten möchte. Zu diesem Zweck kann im Vorlagenverzeichnis ein Ordner mit der Bezeichnung \emph{SharedFunctions} angelegt werden, der beim Aufrufen von Funktionen speziell berücksichtigt wird. Wird die Datei zu einer aufgerufene Funktion im lokalen Ordner nicht gefunden, so wird diese als nächstes im SharedFunctions-Verzeichnis gesucht. Damit lassen sich Funktionen teilen und bei Bedarf auch später noch in das lokale Verzeichnis kopieren und dort anpassen, ohne dass dafür andere Vorlagen angepasst werden müssen.

Im Normalfall wird man geteilte Funktionen nicht so aufbauen, dass sie selber Ausgaben erzeugen, sondern vielmehr so, dass sie ein Ergebnis in einer Menge von Variablen speichern, das dann an der aufrufenden Stelle weiterverarbeitet werden kann.

Das nacholgende Beispiel demonstriert diese Möglichkeit gleich mit zwei Aufrufen derselben Funktion, durch die mittels Parametrisierung zwei unterschiedliche Variablen belegt werden:

\Beispiel
\begin{verbatim}
/// Formatierte Hallo-Welt-Ausgabe
//  Anwendungsbeispiel für die Befehlsreferenz
~Include HalloWelt5 weltindex=1; weltbezeichnung=Geteilte Welt
~Include HalloWelt5 weltindex=2; weltbezeichnung=Gemeinsame Welt
>> $Gruss1
>> $Gruss2
\end{verbatim}
Aufgerufen wird hierbei die Funktionsdatei HalloWelt5.qff:
\begin{verbatim}
// Hallo-Welt-Funktion
// Parameter $weltindex: Schlüsselindex
// Parameter $weltbezeichnung: Weltbezeichnung
?F$weltindex1: Wie soll $weltbezeichnung begrüßt werden?
    #a1: Mit "Hallöchen"        
        ~Set Gruss$weltindex=Hallöchen $weltbezeichnung
    #a2: Mit "Guten Morgen"
        ~Set Gruss$weltindex=Guten Morgen $weltbezeichnung
    #a3: Mit Aloah
        ~Set Gruss$weltindex=Aloah $weltbezeichnung
\end{verbatim}

Ein schöner Anwendungsfall für eine geteilte Funktion ist beispielsweise die Zusammenstellung eines Navigationspfades über eine Auswahlsequenz, z.B.\ um eine Stelle innerhalb einer Software oder anderen Struktur eindeutig zu benennen. Bei einer solchen Funktion wäre die Notwendigkeit einer zentralen Verwaltung aufgrund von Umfang und ständiger Erweiterung enorm wichtig, und trotzdem kann das Ergebnis über eine einfache Variable transportiert werden.

\subsection{URL-Codierung}
Durch den Einbau von Links auf Webseiten in die Ausgabe ist es auch möglich, Webanwendungan anzusteuern, die über die URL parametrisiert werden können. Die häufigste Anwendung hierbei werden Suchaufrufe sein, aber es können auch komplexere Formularseiten oder auch der lokale Mail-Client über einen mailto-Link angestoßen werden. Ein weiterer möglicher Anwendungsfall wäre der Aufruf einer anderen \FlowProtocol-Vorlage mit vollständig oder teilweise vorbelegten Frage- und Eingabeschlüsseln.

Die Hürde, die dabei zu überwinden ist, ist die Codierung der Parameter, so dass diese in der URL übergeben werden können. Sofern die Parameter zur Designzeit feststehen, kann man die Codierung über geeignete Webportale bestimmen und im Vorlagecode hinterlegen, doch bei eingegebenen Parametern ist das nicht möglich. Hierfür gibt es den Befehl \verb|~UrlEncode|.

\Syntax
\begin{verbatim}
~UrlEncode <Var 1>; <Var 2>
\end{verbatim}

Dem Befehl kann eine Liste von Variablen übergeben werden, die für die Verwednung in einer URL codiert werden.

\Beispiel
\begin{verbatim}
/// Kleine Suchmaschine
//  Anwendungsbeispiel für die Befehlsreferenz
~Input S: Suchbegriff
~Set SBeg=$S
~UrlEncode SBeg
>> Bei Google suchen:
    > https://www.google.com/search?q=$SBeg
>> Bei DuckDuckGo suchen:
    > https://duckduckgo.com/?q=$SBeg&ia=web
\end{verbatim}

Im Beispiel wird ein Suchbegriff abgefragt und in die Variable \verb|SBeg| übertragen, da die Codierung nur für Parameter, nicht jedoch für Eingabe- und Frageschlüssel möglich ist. Die Variable wird anschließend in die URLs eingebaut und führt bei Eingabe von \verb|C#| \verb|int?| zu folgender Ausgabe:

\webbox{
\webheadR{Ergebnisliste (Demo, 22 UrlEncoding)}
\begin{numlist}
\item Bei Google suchen: 
\begin{itemize}
\item \texttt{https://www.google.com/search?q=C\%23\%20int\%3f}
\end{itemize}
\item Bei DuckDuckGo suchen: 
\begin{itemize}
\item \texttt{https://duckduckgo.com/?q=C\%23\%20int\%3f\&ia=web}
\end{itemize}
\end{numlist}
}

Die häufig in der Softwareentwicklung verwendete Anwendung Jira bietet z.B. eine Webseite, über die Vorgänge mit vorbelegten Eigenschaften erstellt werden können, wobei Projekt, Typ und beliebige Eigenschaften per Parameter vorbelegt werden können. Ein Expertensystem könnte so durch gezielte Fragen die notwendigen Informationen sammeln und am Ende in der Ausgabe die Erstellung eines Vorgangs vom richtige Typ mit passenden Eigenschaften als Link anbieten.

\subsection{Links mit Anzeigetext}\label{Displaytext}
Aus Abschnitt~\ref{Unterpunkte} wissen wir, dass Unterpunkte, die als URL interpretiert werden können, ausführbar ausgegeben werden. Die zuletzt gezeigten Möglichkeiten führen dabei jedoch in der Regel zu sehr langen und kryptischen Links, für die ein alternativer Anzeigetext wünscheswert wäre. Dies ist wie folgt möglich:

\Syntax
\begin{verbatim}
>> <Ausgabe Text>
    > <URL 1>|<Displaytext 1>
    > <URL 2>|<Displaytext 2>
    . . . 
\end{verbatim}
Der URL-Angabe wird, abgetrennt durch das Pipe-Zeichen der anzuzeigende Text nachgestellt. Wird der Zusatz weggelasen, so wird die URL vollständig wie in Abschnitt~\ref{Unterpunkte} beschrieben ausgegeben. Ist der vordere Teil nicht als URL interpretierbar, so wird der Anzeigetext ignoriert.

\Beispiel
\begin{verbatim}
/// Der Textbaustein "Hallo Welt" wird ausgegeben
//  Anwendungsbeispiel für die Befehlsreferenz
>> HALLO WELT
    > Mehr Infos findest du hier:
    > https://github.com/maier-san/FlowProtocol|FP bei GitHub
\end{verbatim}

Der in der Vorlage hinterlegte Link wird damit in der Ausgabe wie folgt angezeigt:\nopagebreak
\webbox{
\webheadR{Ergebnisliste (Demo, 23 Displaytext)}
\begin{numlist}
\item HALLO WELT
\begin{itemize}
\item Mehr Infos findest du hier:
\item \underline{FP bei GitHub}
\end{itemize}
\end{numlist}
}

\subsection{Verweise auf die eigene URL}\label{eigeneURL}
Die mit \FlowProtocol erzeugte Ausgabe wird häufig in andere digitale Dokumente übertragen. In manchen Fällen kann es dabei sinnvoll sein, die eigene URL in die Ausgabe miteinzubauen, z.B. um spätere Anpassungen der Vorlage nachträglich zu berücksichtigen, oder den Ursprung des Dokuments festzuhalten. Es kann auch sinnvoll sein, nur die URL der Vorlage anzugeben ohne die codierten Frage- und Eingabeschlüssel, um direkt weitere Durchführungen anzubieten. Unabhängig davon bietet die URL auch eine einfache Möglichkeit, das Ergebnis einer komplexeren Abfrage über eine Variable weiterzugeben.

Der Zugriff auf die Information erfolgt über die Systemvariablen \verb|$MyResultURL| für die volltändige URL inklusive der Frage- und Eingabeschlüssel und \verb|$MyBaseURL| für die URL der noch nicht ausgefüllten Vorlage.

\Beispiel
\begin{verbatim}
/// Der Textbaustein "Hallo Welt" wird ausgegeben
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt        
    #a2: In Großbuchstaben
        >> HALLO WELT
    #a3: Rückwärts
        >> tleW ollaH
~Set MRU=$MyResultURL
~UrlEncode MRU
>> FlowProtocol-Link:
    > $MyBaseURL|Weitere Ausführung
    > mailto:xyz@abc.de?subject=W-Vote&body=$MRU|Per Mail abstimmen
\end{verbatim}

Das Beispiel oben erzeugt als ersten Unterpunkt einen Link, mit dem die URL der Vorlage aufgerufen werden kann, so dass man einen weiteren Durchlauf machen kann. Als zweiter Unterpunkt wir ein mailto-Link erzeugt, bei der der Mail-Inhalt aus der vollständigen URL besteht, so dass der Mail-Empfänger das Ergebnis abrufen kann. Auf diese Weise kann z.B.\ ein einfacher Rücksendeweg für Abstimmungen angeboten werden.

\subsection{Hilfetexte}
Manche Fragen und Eingaben können erklärungsbedürftig sein, insbesondere man man ihnen zum ersten Mal oder nach längerer Zeit als Anwender begegnet. Zusätzliche Erläuterungen könnten in die Fragestellung selbst eingebaut werden, würden aber dort den Lesefluss stören. Aus diesem Grund können für für die o.g.\ Elemente Hilfetexte hinterlegt werden, die in der Darstellung klar abgegrenzt werden.
So wie bei den Unterpunkten ist es auch hier möglich, Links mit Anzeigetext zu hinterlegen (siehe Abschnitt~\ref{Displaytext}), um auf evtl.\ weiterführende Informationen auf einer Wikiseite zu verweisen.

\Syntax
\begin{verbatim}
>& <Hilfetext 1>
>& <Hilfetext 2>
. . . 
\end{verbatim}
Es können mehrere Hilfetexte hintereinander eingegeben werde. Diese müssen jedoch unmittelbar auf die Frage oder Eingabe folgen und werden nicht über die Einrückung zugeordnet.

\Beispiel
\begin{verbatim}
/// Der Textbaustein "Hallo Welt" wird ausgegeben
//  Anwendungsbeispiel für die Befehlsreferenz
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    >& Wählen Sie die gewünschte Art der Ausgabe.
    >& Sie können die Ausgabe auch selbst wählen
    >& https://github.com/maier-san/FlowProtocol|FP bei GitHub
    #a1: Ganz normal
        >> Hallo Welt
    #a2: In Großbuchstaben
        >> HALLO WELT
    #a3: Selbst wählen
        ~Input FO: Gewünschte Ausgabe
            >& Geben Sie den gewünschten Text ein.
            >& Sie können auch Systemvariablen verwenden.
        >> $FO
\end{verbatim}

Diese Vorlage führt zu folgender Darstellung:
\webbox{
\webhead{Vorlage Demo, 20 Hilfstexte}{Hallo-Welt-Ausgabe mit Hilfestellung}
Wie soll \dq Hallo Welt\dq ausgegeben werden?
\begin{helplist}
\item Wählen Sie die gewünschte Art der Ausgabe.
\item Sie können die Ausgabe auch selbst wählen.
\item \underline{FP bei GitHub}
\end{helplist}
\begin{circlist}
\item Ganz normal
\item In Großbuchstaben
\item Selbst wählen
\end{circlist}
}
Bei Wahl der Option \glqq Selbst wählen\grqq\ werden die Hilfetexte auch dort bei der Abfrage der gewünschten Ausgabe angezeigt.
\webbox{
\webhead{Vorlage Demo, 20 Hilfstexte}{Hallo-Welt-Ausgabe mit Hilfestellung}
 Gewünschte Ausgabe
\begin{helplist}
\item Geben Sie den gewünschten Text ein.
\item Sie können auch Systemvariablen verwenden.
\end{helplist}
\fpinputbox
}

\subsection{Berechnungen und Rundungen}\label{Berechnungen}
Neben den einfachen Additionen aus Abschnitt~\ref{Additionen} kann es manchmal notwendig sein, mit Zahlen und Variablen zu rechnen. Für die Anwendung der Grundrechenoperationen gibt es den Befehl \verb|~Calculate|.
\Syntax
\begin{verbatim}
~Caluculate <Variable> = <Wert1> <Operator> <Wert2>
\end{verbatim}
Wert 1 und Wert 2 sind Gleitkommaausdrücke in der Formatierung des Systems und der Operator ist eines der Zeichen \verb|+|, \verb|-|, \verb|*|, \verb|/|. Das Ergebnis wird der angegebenen Variablen zugewiesen.

Zusätzlich gibt es den Befehl \verb|~Round|, mit dem ein Wert auf eine bestimmte Anzahl von Dezimalstellen gerundet werden kann.
\Syntax
\begin{verbatim}
~Round <Variable> = <Wert1> | <Genauigkeit>
\end{verbatim}
Als Genauigkeit kann eine natürliche Zahl angegeben, was zur Rundund auf entsprechend viele Dezimalstellen werden. Das Ergebnis wird wieder der angegebenen Variablen zugewiesen.

\Beispiel
\begin{verbatim}
/// Es wird gerechnet
//  Anwendungsbeispiel für die Befehlsreferenz
~Calculate x = 1,4 + 5,7
~Calculate y = $x * -4,9
~Calculate z = -11 / $y
~Round r = $z|4
>> Ergebnis z = $z
>> Gerundet r = $r
\end{verbatim}

Diese Vorlage produziert folgende Ausgabe:
\webbox{
\webheadR{Ergebnisliste (Demo, 26 Berechnungen)}
\begin{numlist}
\item Ergebnis z = 0,3161828111526301 
\item Gerundet r = 0,3162 
\end{numlist}
}

\subsection{Ersetzungen}\label{Ersetzungen}
Ersetzungen können nützlich sein, um Texteingaben zu verarbeiten oder fest im Code hinterlegte Zeichenkennen wie z.B.\ Subversion-Eigenschaften in eine andere Form zu bringen. Hierfür gibt es den Befehl \verb|~Replace|.
\Syntax
\begin{verbatim}
~Replace <Variable> = <Ausgangstext> |<Suchtext>-><Ersetzungstext>
\end{verbatim}
Ausgangstext, Such- und Ersetzungtext sind Zeichenketten und führen dazu, dass alle Vorkommendes Suchtextes im Ausgangstext durch den Erstzungtext ersetz werden. Das Ergebnis wird der angegebenen Variablen zugewiesen.

\Beispiel
\begin{verbatim}
/// Es wird ersetzt
//  Anwendungsbeispiel für die Befehlsreferenz
~Set x = Hallo Welt
~Replace y = $x |Hallo->Aloah
~Replace z = $x | ->+
>> Ergebnis y = $y
>> Ergebnis z = $z
\end{verbatim}

Diese Vorlage produziert folgende Ausgabe:
\webbox{
\webheadR{Ergebnisliste (Demo, 27 Ersetzungen)}
\begin{numlist}
\item Ergebnis y = Aloah Welt
\item Ergebnis z = Hallo+Welt
\end{numlist}
}

\subsection{Eingabevariablen}
Bei Funktionen, die mehrfach in einer Vorlage aufgerufen werden, bietet sich die automatische Nummerierung für Fragen und Eingaben an, um zu vermeiden, diese per Index-Parameter kontrollieren zu müssen (siehe Abschnitt~\ref{Autonummerierung} und \ref{Schleifen}). Für Fragen ergeben sich dadurch keine Einschränkungen, für Eingaben jedoch schon, da man hier ohne Kenntnis des zur Laufzeit expandierten Eingabeschlüssels nicht auf den Eingabewert zugreifen kann. \FlowProtocol\ löst dieses Problem dadurch, dass für Eingabe mit autonummerierten Eingabeschlüssel der Eingabewert zusätzlich in eine Variable übertragen wird, deren Zusammensetzung zur Designzeit bekannt ist. 
\Syntax
\begin{verbatim}
~Input  <Eingabeschlüssel>': <Fragetext>
~Set x = $<Eingabeschlüssel>value
\end{verbatim}
Es ist klar, dass sich diese Variable beim mehrfachen Aufruf einer Vorlage wiederholt und somit überschrieben wird, aber eine Verarbeitung im lokalen Kontext der Vorlage ist trotzdem möglich. Es empfiehlt sich daher, den festen Teil des Eingabeschlüssels innerhalb einer Funktionsdatei eindeutig zu wählen, und Kollisionen auszuschließen.

\Beispiel
\begin{verbatim}
/// Es werden wieder Welten gegrüßt
//  Anwendungsbeispiel für die Befehlsreferenz
?F': Soll die Bergwelt gegrüßt werden?
    #j: Ja
        ~Include HalloWelt5 welt=Bergwelt
    #n: Nein
?F': Soll die Wasserwelt gegrüßt werden?
    #j: Ja
        ~Include HalloWelt5 welt=Wasserwelt
    #n: Nein
\end{verbatim}
mit Funktionsdatei
\begin{verbatim}
// Hallo-Welt-Funktion
// Parameter $welt
?F': Wie soll die $welt begrüßt werden?
    #a1: Mit Hallo
        >> Hallo $welt
    #a2: Mit Aloah
        >> Aloah $welt
    #a3: Mit eigenem Gruß
        ~Input GF': Grußformel für $welt
        >> $GFvalue $welt
\end{verbatim}
Das Beispiel zeigt den typischen Anwendungsfall einer Funktion, die für verschiedene Variablenwerte aufgerufen werden kann, und die auch eine Eingabe pro Aufruf ermöglicht.

\subsection{Zufallswerte}
Manchmal benötigt man einen Zufallswert, z.B. als Schlüsselwert in Code-Fragmenten oder um den Anwender bei der zufälligen Auswahl einer Stichprobe zu unterstützen. Dieser kann über eine eingebaute Funktion erzeugt werden.
\Syntax
\begin{verbatim}
~Random <Variable> = <Wert1> .. <Wert2>
\end{verbatim}
Der Wertebereich besteht aus den ganzzahligen Zahlen im Intervall [\verb|Wert1|,\verb|Wert2|], wobei die Intervallgrenzen eingeschlossen sind.
\Beispiel
\begin{verbatim}
/// Die Welt wird nach dem Zufallsprinzip begrüßt
//  Anwendungsbeispiel für die Befehlsreferenz
~Random auswahl=1..3
~Implies F1=a$auswahl
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Hallo Welt
    #a2: In Großbuchstaben
        >> HALLO WELT
    #a3: Rückwärts
        >> tleW ollaH
\end{verbatim}
Im Beispiel wir ein zufälliger Wert $x\in\{1,2,3\}$ der Variable \verb|auswahl| zugewiesen und dann, ergänzt durch das Zeichen \glqq a\grqq\ der Zielvariablen \verb|F1|. Die Frage wird damit nicht mehr ausgegeben.

\subsection{Überschriften}\label{Ueberschriften}
Bei umfangreicheren Vorlagen ist es sinnvoll, die Fragen und Eingaben mit Hilfe von Überschriften zu gliedern.
\Syntax
\begin{verbatim}
++ <Überschrift> ++
\end{verbatim}
Überschriften können an beliebigen Stellen im Vorlagencode angegeben werden, und werden damit automatisch allen im Vorlagecode nachvolgenden Fragen und Eingaben zugeordnet, bis eine neue Überschrift festgelegt wird. Die Einrückung ist hierbei nicht von Belang.

Bei an der Programmoberfläche wird die Überschrift oberhalb der Frage oder Eingabe ausgegeben, sofern sie sich von der zuletzt ausgegebenen Überschrift unterscheidet. Aufeinanderfolgende Fragen und Eingaben mit der gleichen Überschrift werden also unter derselben Überschrift zusammengefasst.
\Beispiel
\begin{verbatim}
/// Ein weiterer Gruß an die Welt!
//  Anwendungsbeispiel für die Befehlsreferenz
++ Standardoptionen ++
?F1: Wie soll "Hallo Welt" ausgegeben werden?    
    #a1: Ganz normal
        ~Set gruss = Hallo Welt
    #a2: In Großbuchstaben
        ~Set gruss = HALLO WELT
~Input szeichen: Welches Satzzeichen soll ans Ende?
++ Ergänzung ++
?F2: Soll noch eine Ergänzung dazu?
    #j: Ja, ", ich mag dich"
        ~Set gruss = $gruss, ich mag dich
    #n: Nein
~Execute    
>> $gruss$szeichen
\end{verbatim}
Dies führt zu folgender Darstellung
\webbox{
\webhead{Vorlage Demo, 30 Überschriften}{Ein weiterer Gruß an die Welt!}
\qsection{Standardoptionen}
Wie soll \dq Hallo Welt\dq\ ausgegeben werden? 
\begin{circlist}
\item Ganz normal
\item In Großbuchstaben
\end{circlist}
 Welches Satzzeichen soll ans Ende?\\
\fpinputbox
\qsection{Ergänzung}
Soll noch eine Ergänzung dazu? 
\begin{circlist}
\item Ja, \dq, ich mag dich\dq
\item Nein
\end{circlist}
}
Zu beachten ist, dass die Abfolge der Fragen und Eingaben aufgrund der Verschachtelung und der Möglichkeit, nur eine Teilmenge auf einer Seite zu beantworten, von der im Vorlagecode abweichen kann. Die Zuordnung der Überschriften erfolgt unabhängig davon und orientiert sich am Vorlagecode.

\subsection{CamelCase-Umwandlung}
Möchte man eine Vorlage erstellen, die für eine zu implementierende Programmfunktion die einzubauenden Codepassagen ausgibt, steht man vor der Herausforderung, dass dort Steuerelemente, Klassen oder Methoden in Anlehnung an die Funktion benannt werden sollten, und sich diese Bennungen an Syntaxregeln und Codekonventionen orientieren müssen. Als Programmierer wählt man hier üblicherweise die CamelCase-Schreibweise, wandelt zuvor die Umlaute um und entfernt die Nichtwortzeichen. Diese Arbeit könnte man natürlich auch vom Anwender der Vorlage verlangen und eine entsprechende Eingabe abfragen, da man aber höchstwahrscheinlich schon die sprechende Funktionsbenennung als Eingabewert abgefragt hat, kann man diese auch mit einer eingebauten Funktion in die CamelCase-Schreibweise umwandeln.
\Syntax
\begin{verbatim}
~CamelCase <Variable> = <Wert>
\end{verbatim}
Der Wert kann hierbei eine beliebige Zeichenkette sein.
\Beispiel
\begin{verbatim}
/// Ein Gruß wird in CamelCase-Schreibweise umgewandelt
//  Anwendungsbeispiel für die Befehlsreferenz
~Set gruss = Hallo, du süße Honigwelt!
~CamelCase ccgruss = $gruss
>> Vorgabe = $gruss
>> CamelCase = $ccgruss
\end{verbatim}
Dies führt zu folgender Ausgabe:
\webbox{
\webheadR{Ergebnisliste (Demo, 31 CamelCase)}
\begin{numlist}
\item Vorgabe = Hallo, du süße Honigwelt! 
\item CamelCase = HalloDuSuesseHonigwelt 
\end{numlist}
}
Zu beachten ist, dass innerhalb der Wortzeichen aktuell nur die Umlaute ä, ö, ü, Ä, Ö, Ü und das ß ersetzt werden. Die Ersetzung der diakritischen Zeichen aus dem nichtdeutschen Sprachraum folgt voraussichtlich in einer zukünftigen Version. Bis dahin kann eine solche Ersetzung mit dem \verb|~Replace|-Befehl (siehe Abschnitt~\ref{Ersetzungen}) innerhalb der Vorlage selbst umgesetzt werden.

\subsection{Codesequenzen}
In Abschnitt~\ref{Codebloecke} wird die Möglichkeit beschrieben Codeblöcke in der Ausgabe darzustellen. Zusammen mit der Möglichkeit, dort Variablen zu ersetzen, kann man sehr gut kleinere Programmcodeelemente anpassen und ausgeben. Sobald man jedoch den Programmcode in einem einzigen Block in Abhängigkeit verschachtelter Fragen und Antworten aus kleineren Blöcken zusammensetzen möchte, stößt man hierbei an Grenzen. Hierfür gibt es den Befehl \verb|~InsertCodeSummary|, der eine Sequent aus vorangehenden Codeblöcken in einem Codeblock zusammenfassen kann.
\Syntax
\begin{verbatim}
>> <Ausgabe Text>
    >|~InsertCodeSummary
\end{verbatim}
Ergänzend dazu gibt es den Befehl \verb|~StartCodeSummary|, mit dem der Anfang für diese Zusammenfassung gekennzeichnet wird.
\Syntax
\begin{verbatim}
>> <Ausgabe Text>
    >|~StartCodeSummary
\end{verbatim}
Beide Befehle wirken nur, wenn sie nicht in Verbindung mit anderen Codezeilen verwendet werden und beziehen sich immer auf die jeweilige Ausgabegruppe (siehe Abschnitt~\ref{Gruppierungen}). Die Befehle selbst werden nicht ausgegeben. Mit Hilfe der beiden Befehle können mehrere Zusammenfassungen innerhalb einer Gruppe erzeugt werden.

Grundsätzlich wird der Code für die Zusammenfassung kopiert, also an der ursprünglichen Stelle und in der Zusammenfassung ausgegeben. Steht der Code jedoch in einer leeren Ausgabe, also einer die selbst keinen Text enthält, so wird die ganze Ausgabe beim Zusammenfassen entfernt, so dass der Code nur noch in der Zusammenfassung erscheint. 
\Beispiel
\begin{verbatim}
/// Hallo Welt mit Codegenerierung
//  Anwendungsbeispiel für die Befehlsreferenz
>> Codebeispiel >> Kommentar einfügen
    >|// Das kleine Codebeispiel
>> Codebeispiel >>
    >|~StartCodeSummary
>> Codebeispiel >>
    >|public void HalloWelt()
    >|{
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
        >> Codebeispiel >> Ausgabe von Hallo Welt            
            >|    Console.Writeline("Hallo Welt");
    #a2: In Großbuchstaben
        >> Codebeispiel >> Ausgabe von HALLO WELT
            >|    Console.Writeline("HALLO WELT");
>> Codebeispiel >>
    >|}
>> Codebeispiel >> Kompletter Code
    > Einfach abtippen:
    >|~InsertCodeSummary
\end{verbatim}
In diesem Beispiel beginnt die Zusammenfassung erst in der zweiten Ausgabe, so dass der erste Codeblock nur zusammen mit der ersten Ausgabe ausgegeben wird. Die zweite Ausgabe mit dem Startbefehl ist leer und wird daher nicht ausgegeben. Die dritte Ausgabe ist ebenfalls leer, liegt aber innerhalb der Zusammenfassung und wird durch sie entfernt. Der Prozedurkopf erscheint daher nur in der Zusammenfassung, genauso wie die schließende Klammer am Ende. Der durch die Frage variable Code in der Mitte hängt für beide Antworten an einer nicht leeren Ausgabe und wird somit sowohl dort, als auch in der Zusammenfassung ausgegeben.

Entscheidet man sich für die Großbuchstaben, erhält man folgende Ausgabe:
\webbox{
\webheadR{Ergebnisliste (Demo, 34 Codesequenzen)}\\
Codebeispiel
\begin{numlist}
\item Kommentar einfügen\\
\texttt{// Das kleine Codebeispiel}
\item  Ausgabe von HALLO WELT\\
\hspace*{2ex}\texttt{    Console.Writeline(\dq HALLO WELT\dq);}
\item Kompletter Code
\begin{itemize}
\item Einfach abtippen:
\end{itemize}
\texttt{public void HalloWelt()}\\
\texttt{\{}\\
\hspace*{2ex}\texttt{    Console.Writeline(\dq HALLO WELT\dq);}\\
\texttt{\}}
\end{numlist}
}

\subsection{Datum- und Uhrzeit-Formatierung}\label{Datumsformatierung}
Die Anforderung, in Protokollen auch Datum und Uhrzeit auszugeben, bedarf keiner zusätzlicher Erklärung. Die in Abschnitt~\ref{Systemvariablen} beschriebenen Systemvariablen bieten dafür auch schon einige Möglichkeiten. Benötigt man weitere Formate oder möchte man seine Ausgaben unabhängig von den Kultureinstellungen des Servers formatieren, kann man den Befehl \verb|~SetDateTimeFormat| in Verbindung mit der Systemvariablen \verb|$GetFDateTime| verwenden, um beliebige Formate zu erzeugen.
\Syntax
\begin{verbatim}
~SetDateTimeFormat <Formatzeichenfolge>
\end{verbatim}
Verwendet werden die Formatzeichenfolgen, die auch in .NET verwendet werden können. Diese werden umfangreich auf zahlreichen Seiten im Internet beschrieben.
\Beispiel
\begin{verbatim}
/// Formatiertes Datum
//  Anwendungsbeispiel für die Befehlsreferenz
~SetDateTimeFormat dd. MMM yy
>> Heute ist der $GetFDateTime.
~SetDateTimeFormat dddd
>> Und das ist ein $GetFDateTime.
\end{verbatim}
Dieses Beispiel erzeugt die folgende Ausgabe:
\webbox{
\webheadR{Ergebnisliste (Demo, 36 Formatiertes Datum)}
\begin{numlist}
\item Heute ist der 28. Jan. 23. 
\item Und das ist ein Samstag.
\end{numlist}
}
Wie man sieht, kann man die Formatierung zwishen verschiedenen Ausgaben ändern. Um verschiedene Formate innerhalb einer Ausgabe zu verwenden,  kann Variablen einsetzen.

Zu beachten ist, dass auch hier die Kultureinstellungen des Servers verwendet werden, was insbesondere bei den Textformaten wie \verb|dddd| usw.\ einen Unterschied macht. Die beliebige Komposition der Zahlenwerte ist jedoch ohne weiteres möglich.

\newpage
\section{Systemvariablen}\label{Systemvariablen}
Systemvariablen sind spezielle Variablen, die schon durch das System mit Werten belegt werden. Diese lassen sich wie andere Variablen abrufen und in Fragen, Ausgaben oder Variablenzuweisungen verwenden. Manche der Variablen sind vielmehr als Funktionen zu betrachten und dementsprechend auch mit \texttt{Get\dots} benannt. Im Abschnitt~\ref{eigeneURL} haben wir schon zwei Beispiele für Systemvariablen kennengelernt, mit denen die eigene URL abgerufen werden kann.
\begin{description}
\SysVar{NewGuid}{Gibt eine zufällige Guid zurück, z.B.\\\texttt{d817e626-d0b1-40c7-979a-a08b5d6df8a8}.}
\SysVar{GetDate}{Gibt das aktuelle Datum in der auf dem System eingestellten Formatierung zurück, z.B.\ \texttt{29.09.2022}.}
\SysVar{GetDateStamp}{Gibt das aktuelle Datum als alphanumerisch sortierbaren Datumstempel zurück, z.B.\ \texttt{2022-09-22}.}
\SysVar{GetDateTime}{Gibt den aktuellen Zeitpunkt mit Datum und Uhrzeit in der auf dem System eingestellten Formatierung zurück, z.B.\ \texttt{29.09.2022 17:26}.}
\SysVar{GetFDateTime}{Gibt den aktuellen Zeitpunkt in der Formatierun zurück, die aktuell über den Befehl \texttt{SetDateTimeFormat} (siehe Abschnitt~\ref{Datumsformatierung}) eingestellt ist.}
\SysVar{GetTime}{Gibt die aktuelle Zeit in der auf dem System eingestellten Formatierung zurück, z.B.\ \texttt{17:26}.}
\SysVar{GetYear}{Gibt das aktuelle Jahr im Format yyyy zurück, z.B.\ \texttt{2022}.}
\SysVar{MyResultURL}{Gibt die URL der aktuellen Vorlageausführung inklusive Schlüsselparameter zurück, siehe auch Abschnitt~\ref{eigeneURL}.}
\SysVar{MyBaseURL}{Gibt die URL der aktuellen Vorlageausführung ohne Schlüsselparameter zurück, siehe auch Abschnitt~\ref{eigeneURL}.}
\SysVar{CRLF}{Gibt die Zeichenfolge \texttt{\textbackslash r\textbackslash n} (Carriage Return + Line Feed) zurück, mit der ein Zeilenumbruch auf Windows-System erzeugt wird.}
\SysVar{LF}{Gibt das Zeichen \texttt{\textbackslash n} (Line Feed) zurück, mit dem ein Zeilenuburch auf den System Unix/Mac OS X erzeugt wird.}
\SysVar{ChrXXX}{mit $1\le XXX\le 255$. Gibt das Zeichen mit dem ASCII-Code XXX zurück, z.B.\ \texttt{\$Chr065 = A}.}
\end{description}

\newpage
\section{Fehlermeldungen}
Die Möglichkeit, Vorlagen von Hand zu schreiben birgt ein gewisses Fehlerrisiko. Die Fehler werden bei der Ausführung weitestgehend erkannt und im Kopfbereich mit allen notwendigen Informationen angezeigt. 
\Beispiel
\begin{verbatim}
/// Fehler-Beispiel
//  Anwendungsbeispiel für die Befehlsreferenz
#d: Hallo Fehler!
~Tralala abc
?F1: Ist ein Fehler schlimm?
    #j: Ja
        >> Stimmt, muss man korrigieren.
    #n: Nein
        >> Stimmt, Ausführung geht weiter.
\end{verbatim}
Der Aufruf dieser Vorlage führt direkt zur Anzeige der beiden Fehler:
\webbox{
\webhead{Vorlage Demo, 15 HalloFehler}{Fehler-Beispiel}
\textbf{Hinweis:} Beim Ausführen der Vorlage sind Fehler aufgetreten. Bitte wenden Sie sich an den Autoren der Vorlage oder einen Administrator, um die Korrekturen zu veranlassen:
\begin{numlist}
\ZeigeFehlerItem{Fehler R04, Antwort kann keinem Fragekontext zugeordnet werden.}{Zeile 3}{FlowProtocol/Templates/Demo/14 HalloFehler.qfp}{\#d: Hallo Fehler!}
\ZeigeFehlerItem{Fehler C02,Der Befehl Tralala ist nicht bekannt und kann nicht ausgeführt werden.}{Zeile 4}{FlowProtocol/Templates/Demo/14 HalloFehler.qfp}{\~{}Tralala abc}
\end{numlist}
\rule{\linewidth}{1pt}\\[3mm]
Ist ein Fehler schlimm?
\begin{circlist}
\item Ja
\item Nein
\end{circlist}
}
Wie man erkennt, wird der nach dem Fehler stehende Vorlagencode trotz der Fehler interpretiert und ausgeführt, was die Notwendigkeit einer Korrektur natürlich nicht mindert.

\subsection{Einlesefehler}
Einlesefehler treten direkt beim Einlesen einer Vorlage- oder Funktionsdatei auf. Da eine Funktionsdatei erst bei Bedarf eingelesen wird, werden auch die darin enthaltenen Fehler erst angezeigt, wenn der entsprechende Zweig durchlaufen wird.
\begin{description}
\FehlerBeschreibungItem{R01}{Vorlagendatei nicht gefunden.} Kann auftreten, wenn eine als Lesezeichen gespeicherte URL auf eine nicht (mehr) vorhandene Vorlagendatei verweist, oder kein Lesezugriff auf das Verzeichnis besteht.
\FehlerBeschreibungItem{R02}{Beschreibungskommentar auf untergeordneter Ebene wird ignoriert.} Tritt auf, wenn ein Beschreibungskommentar nicht auf oberster Ebene der Vorlage angegeben ist. Dieser wird ignoriert.
\FehlerBeschreibungItem{R03}{Frage kann keinem Kontext zugeordnet werden.} Tritt auf, wenn eine Frage keinem Vorlagenkontext zugeordnet werden kann, wenn also die Struktur aus Fragen und Antworten unstimmig ist. Ursache kann eine fehlerhafte Einrückung sein, z.B.\ weil dabei Leerzeichen und Tabulatorzeichen gemischt wurden.
\FehlerBeschreibungItem{R04}{Antwort kann keinem Fragekontext zugeordnet werden.} Tritt auf, wenn eine Antwort keinem Fragekontext zugeordnet werden kann, wenn also die Struktur aus Fragen und Antworten unstimmig ist. Ursache kann eine fehlerhafte Einrückung sein, z.B.\ weil dabei Leerzeichen und Tabulatorzeichen gemischt wurden.
\FehlerBeschreibungItem{R05}{Gruppierter Ausgabeeintrag kann keinem Kontext zugeordnet werden.} Tritt auf, wenn ein gruppierter Ausgabeeintrag keinem Vorlagenkontext zugeordnet werden kann. Mögliche Ursachen siehe Fehler R03.
\FehlerBeschreibungItem{R06}{Ausgabeeintrag kann keinem Kontext zugeordnet werden.} Tritt auf, wenn ein nicht gruppierter Ausgabeeintrag keinem Vorlagenkontext zugeordnet werden kann. Mögliche Ursachen siehe Fehler R03.
\FehlerBeschreibungItem{R07}{Unterpunkt  kann keinem Ausgabeeintrag zugeordnet werden.} Tritt auf, wenn ein Unterpunkt keinem Ausgabeeintrag zugeordnet werden kann. Unterpunkte müssen immer unmittelbar auf Ausgabeeinträge oder andere Unterpunkte oder Codezeilen folgen und dürfen nicht durch Fragen und Antworten unterbrochen werden.
\FehlerBeschreibungItem{R08}{Execute-Befehl kann keinem Kontext zugeordnet werden.} Tritt auf, wenn der Execute-Befehl keinem Vorlagenkontext zugeordnet werden kann. Mögliche Ursachen siehe Fehler R03.
\FehlerBeschreibungItem{R09}{Befehl kann keinem Kontext zugeordnet werden.} Tritt auf, wenn ein Befehl keinem Vorlagenkontext zugeordnet werden kann. Mögliche Ursachen siehe Fehler R03.
\FehlerBeschreibungItem{R10}{Zeile nicht interpretierbar} Tritt auf, wenn eine Zeile nicht als Anweisung interpretiert werden kann, sie also keiner innerhalb einer Vorlage bekannten Syntax entspricht.
\FehlerBeschreibungItem{R11}{Input-Befehl kann keinem Kontext zugeordnet werden.} Tritt auf, wenn ein Input-Befehl  keinem Vorlagenkontext zugeordnet werden kann. Mögliche Ursachen siehe Fehler R03.
\FehlerBeschreibungItem{R12}{Codezeile kann keinem Ausgabeeintrag zugeordnet werden.} Tritt auf, wenn eine Codezeile keinem Ausgabeeintrag zugeordnet werden kann. Codezeilen müssen immer unmittelbar auf Ausgabeeinträge oder Unterpunkte oder andere Codezeilen folgen und dürfen nicht durch Fragen und Antworten unterbrochen werden.
\FehlerBeschreibungItem{R13}{Hilfetext kann keinem Kontext zugeordnet werden.} Tritt auf, wenn ein Hilfetext keine Kontext zugeordnet werden kann. Hilfetexte können direkt an eine Frage oder eine Eingabe angefügt werden.
\end{description}

\subsection{Ausführungsfehler}
Ausführungsfehler treten im Zusammenhang mit der Ausführung von Befehlen auf und sind teilweise vom Ausführungsverlauf abhängig. Auch sie werden erst dann angezeigt, wenn der entsprechende Zweig durchlaufen wird.
\begin{description}
\FehlerBeschreibungItem{C00}{Beim Ausführen eines Befehls ist ein unbehandelter Fehler aufgetreten.} Tritt auf, wenn bei der Ausführung ein Fehler auftritt, der durch die Anwendung nicht weiter eingegrenzt werden konnte.
\FehlerBeschreibungItem{C02}{Der Befehl $\dots$ ist nicht bekannt und kann nicht ausgeführt werden.} Tritt auf, wenn eine Befehlsanweisung keinem bekannten Befehl entspricht. Eine Abweichung in der Groß-Klein-Schreibung kann als Ursache ausgeschlossen werden.
\FehlerBeschreibungItem{C03}{Die Funktionsdatei $\dots$ konnte nicht geladen werden.} Tritt auf, wenn in einem Include-Befehl angegebene Funktionsdatei nicht gefunden werden konnte.
\FehlerBeschreibungItem{C04}{Der Wert der Variablen $\dots$ konnte nicht als ganze Zahl interpretiert werden.} Tritt auf, wenn für eine Variable im Set-Befehl ein Wert addiert werden soll, und diese zum entsprechenden Zeitpunkt einen nichtnumerischen Wert enthält.
\FehlerBeschreibungItem{C05}{Der Aufruf der Funktionsdatei $\dots$ überschreitet das Rekursionsmaximum von 100.} Tritt auf, wenn mehr als 100 Mal eine Funktionsdatei aufgerufen wird. Diese einfache Sicherung verhindert Endlosrekursionen, die zum Absturz der Anwendung führen würden.
\FehlerBeschreibungItem{C06}{Der Ausdruck $\dots$ konnte nicht als Berechnungsausdruck interpretiert werden.} Tritt auf, wenn ein im Zusammenhang mit einen \texttt{Calculate}-Befehl angegebener Audruck nicht wie in Abschnitt~\ref{Berechnungen} beschrieben interpretiert werden kann.
\FehlerBeschreibungItem{C07}{Der Ausdruck $\dots$ konnte nicht als gültige Zielvariable interpretiert werden.} Tritt auf, wenn der Audruck links vom Gleichheitszeichen eines \texttt{Calculate}-, oder \texttt{Round}-Befehls nicht als Variable interpretiert werden kann.
\FehlerBeschreibungItem{C08}{Der Ausdruck $\dots$ konnte nicht als Gleitkommazahl interpretiert werden.} Tritt auf, wenn einer der Operanden eines \texttt{Calculate}-, bzw.\ der erste Operand des \texttt{Round}-Befehls nicht als Gleitkommazahl interpretiert werden kann.
\FehlerBeschreibungItem{C09}{Division durch 0.} Tritt auf, wenn über den \texttt{Calculate}-Befehl eine Divison durch 0 durchgeführt werden soll.
\FehlerBeschreibungItem{C10}{Der Ausdruck $\dots$ konnte nicht als zulässiger Operator interpretiert werden.} Tritt auf, wenn der Operator eines \texttt{Calculate}-Befehls nicht interpretiert werden kann.
\FehlerBeschreibungItem{C11}{Der Ausdruck $\dots$ konnte nicht als natürliche Zahl interpretiert werden.} Tritt auf, wenn der zweite Wert des \texttt{Round}-Befehls nicht als natürliche Zahl interpretiert werden kann.
\FehlerBeschreibungItem{C12}{Der Ausdruck $\dots$ konnte nicht als Rundungsausdruck interpretiert werden.} Tritt auf, wenn ein im Zusammenhang mit einen \texttt{Round}-Befehl angegebener Audruck nicht wie in Abschnitt~\ref{Berechnungen} beschrieben interpretiert werden kann.
\FehlerBeschreibungItem{C13}{Der Ausdruck $\dots$ konnte nicht als Ersetzungsausdruck interpretiert werden.} Tritt auf, wenn ein im Zusammenhang mit einen \texttt{Replace}-Befehl angegebener Audruck nicht wie in Abschnitt~\ref{Ersetzungen} beschrieben interpretiert werden kann.
\FehlerBeschreibungItem{C14}{Die angegebenen Werte bilden kein gültiges Intervall.} Tritt auf, wenn für die beiden für den \texttt{Random}-Befehl angegebenen Intervallgrenzen kein gültiges Intervall bilden, also der erste Wert größer ist, als der zweite.
\FehlerBeschreibungItem{C15}{Die Listendatei {listfilepath} konnte nicht gefunden werden.} Tritt auf, wenn beim Fragelisten-Befehl \verb|~ForEach| (siehe Abschnitt~\ref{Fragelisten}) die angegebene Fragedatei nicht gefunden werden kann. 
\end{description}
\newpage
\section{Spezialbefehle}
Spezialbefehle sind spezielle Befehle, die die Struktur einer Vorlage verändern, und die darauf erfolgten Eingaben in eigener Weise interpretieren und zu einem Ergebnis umsetzen können. Diese Befehle wirken innerhalb des Vorlageteils, wo sie stehen, also auf einer Verschachtelungsebene bis zu den jeweils angrenzenden \verb|~Execute|-Befehlen.
\subsubsection*{Befehlsübergreifende Fehlermeldungen}
\begin{description}
\FehlerBeschreibungItem{S01}{Befehl ohne $\dots$-Argument.} Tritt auf, wenn das zwingende $\dots$-Argument nicht angegeben wurde.
\FehlerBeschreibungItem{S02}{Frageschlüssel $\dots$ ($\dots$-Argument) nicht gefunden.} Tritt auf, wenn der über das $\dots$-Argument angegebene Frageschlüssel nicht gefunden wurde.
\FehlerBeschreibungItem{S03}{Befehl ohne gültiges $\dots$-Argument.} Tritt auf, wenn für einen Befehl ein ungültiger Parameterwert angegeben wurde, z.B.\ eine \texttt{GroupSize}-Angabe, die nicht als Zahl interpretiert werden kann.
\end{description}

\subsection{Rangfolgenbestimmung}\label{Rangfolgenbestimmung}
Die Rangfolgenbestimmung ist die Implementierung einer Methode, bei der man eine Rangfolge von Dingen wie z.B. Projekten dadurch bestimmt, dass man diese paarweise vergleicht. Bei jedem Vergleich bekommt der Gewinner einen Punkt und am Ende sortiert man die Einträge entsprechend ihrer Punktezahl. Die Reduzierung auf 2er-Vergleiche vereinfacht zwar die Entscheidung pro Frage, macht die Beantwortung jedoch auch deutlich umfangreicher. Für $n$ Elemente ergeben sich $\frac{n(n-1)}{2}$ Einzelfragen, also für $n=8$ also schon 28 Fragen.
\FlowProtocol unterteilt dabei die Einzelfragen so in Gruppen, dass jedes Element maximal einmal pro Gruppe vorkommt. Für eine gerade Anzahl von $n$ Elementen werden auf diese Weise $n-1$ Gruppen mit $\frac n2$ Vergleichen gebildet und für eine ungerade Anzahl $n$ sind es $n$ Gruppen mit je $\frac{n-1}{2}$ Vergleichen.
\Syntax
\begin{verbatim}
~Vote Key=<F-Schlüssel> [;GroupName=<G-Name>] 
            [;DrawOption=<Unentschiedenoption>]
            [;ResultVar=<Var>; ResultSep=<Trennzeichen>;]
\end{verbatim}
\Beispiel
\begin{verbatim}
/// Es wird eine Rangfolgenbestimmung durchgeführt
//  Anwendungsbeispiel für die Befehlsreferenz
~Vote Key=V; GroupName=Die besten Welten; DrawOption=egal; 
            ResultVar=Erg; ResultSep=$CRLF;
?V: Welche Welt gefällt dir besser?
    #w1: Waldwelt
    #w2: Wasserwelt
    #w3: Bergwelt
    #w4: Wichtelwelt
~Execute
~UrlEncode ErgRPO
>> Abstimmen >> Klicken Sie auf den Link
    > mailto:xyz@abc.de?subject=W-Vote&body=$ErgRPO|Jetzt abstimmen
\end{verbatim}
Der Aufruf dieser Vorlage führt dazu, dass die Frage mit dem Schlüssel \texttt{V} zu einer Reihe von Einzelfragen umgestaltet wird. Genauer: Die Frage wird für jede der drei 2er-Kombinationen abgefragt. Die Fragen werden zur 3er-Gruppen zusammengefasst, was hier eine Gruppe ergibt. Das Ergebnis wird unter der Gruppenüberschrift \textit{Die besten Welten} aufgelistet.

Die Option \texttt{DrawOption} ermöglicht es, für jede Paarung auch mit unentschieden zu stimmen, wobei der Text für diese Option frei gewählt werden kann. Im Beispiel oben wird als dritte Option jeweils \textit{egal} angezeigt. Die Punktevergabe wird in diesem Fall so angepasst, dass der Sieger einer Paarung 2 Punkte bekommt und im Fall eines Unentschiedens jeder einen Punkt, so dass auch hier die Gesamtpunktzahl immer gleich bleibt.

Mit den Optionen \texttt{ResultVar} und \texttt{ResultSep} kann festgelegt werden, dass das Ergebnis der Abstimmung in drei Variablen zur Verfügung gestellt wird. Diese beginnen mit der in \texttt{ResultVar} angegebenen Zeichenfolge und Enden auf \texttt{RPO}, \texttt{RPO} und \texttt{O}:\\[1ex]
\begin{tabular}{|r|l|l|}\hline
Endung & Abkürzung für & Beispiel\\\hline
\texttt{RPO} & Rang, Punkte, Option & Platz 1, 6 Punkte, Bergwelt\\
\texttt{PO} & Punkte, Option & 6 Punkte, Bergwelt\\
\texttt{O} & Option & Bergwelt\\\hline
\end{tabular}\\[1ex]

Im Beispiel oben wird die Variable \texttt{ErgRPO} für die Verwendung in einem mailto-Link codiert. 
Man bechte außerdem den zusätzlichen Strichpunkt nach \verb|$CRLF|. Dieser verhindert, dass die zu einem Whitespace-Zeichen ersetze Zeichensequenz am Zeilenende steht und damit ignoriert wird.
\webbox{
\webhead{Vorlage Demo, 16 Vote}{Es wird eine Abstimmungsbewertung durchgeführt}
Welche Welt gefällt dir besser? 
\begin{circlist}
\item Waldwelt
\item Wasserwelt
\item egal
\end{circlist}
Welche Welt gefällt dir besser? 
\begin{circlist}
\item Bergwelt
\item Wichtelnwelt
\item egal
\end{circlist}
}
Das Ergebnis wird dann wie folgt präsentiert:\nopagebreak
\webbox{
\webheadR{Ergebnisliste (Demo, 16 Vote)}\\
Die besten Welten
\begin{numlist}
\item Platz 1 (6 Punkte) Bergwelt
\item Platz 2 (4 Punkte) Waldwelt
\item Platz 3 (2 Punkte) Wasserwelt
\item Platz 4 (0 Punkte) Wichtelwelt
\end{numlist}
Abstimmen
\begin{numlist}
\item Klicken Sie auf den Link
\begin{itemize}
\item \underline{Jetz abstimmen}
\end{itemize}
\end{numlist}
}
Es kann auch Punktegleichstand geben. Dann teilen sich mehrere Elemente einen Platz.
\subsection{Zitatmodus}
Sofern es bei einer Vorlage nur darum geht, die gewählten Antworten auf die Fragen zu notieren, kann man sich die Arbeit stark vereinfachen. Mit den standardmäßigen Sprachmitteln müsste man in jedem Antwortzweig Ausgaben erzeugen, die sowohl Frage, als auch Antwort beinhalten, was eine prinzipiell unnötige Wiederholung einer schon vorhandenen Information ist. Der Zitatmodus erledigt genau das für einen kompletten Vorlageteil.
\Syntax
\begin{verbatim}
~Cite [GroupName=<Gruppe>]
\end{verbatim}
\Beispiel
\begin{verbatim}
/// Es wird gefragt, wie  "Hallo Welt" ausgegeben werden soll
//  Anwendungsbeispiel für die Befehlsreferenz
~Cite GroupName=Antwortprotokoll
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Ganz normal
    #a2: In Großbuchstaben
    #a3: Rückwärts
\end{verbatim}
Der Aufruf dieser Vorlage führt dazu, dass die Frage als Ausgabe mit der gewählten Antwort als Unterpunkt ausgegeben wird. Das Ergebnis wird unter der Gruppenüberschrift \textit{Antwortprotokoll} aufgelistet. 
\webbox{
\webheadR{Ergebnisliste (Demo, 17 Cite)}\\
Antwortprotokoll
\begin{numlist}
\item Wie soll \glqq Hallo Welt\grqq ausgegeben werden?
\begin{itemize}
\item In Großbuchstaben
\end{itemize}
\end{numlist}
}

\subsection{Fragelisten}\label{Fragelisten}
In manchen Fällen besteht eine Vorlage aus einer größeren Menge von Fragen, die sich nur im Text, nicht jedoch in den Antwortmöglichkeiten unterscheiden, und auf die man folglich jeweils dasselbe Frageschema anwenden möchte. Der Fragelisten-Befehl ermöglich eine solche Vorgehensweise und verwendet dabei ähnlich wie die Funktionen eine eigene Datei.
\Syntax
\begin{verbatim}
~ForEach Key=<F-Schlüssel>; List=<Listendatei>; IndexVar=<Var>
            [;Take=<A>]  [;GroupBy=<B>]
\end{verbatim}
Mit \texttt{F-Schlüssel} wird der Schlüssel der Frage angegeben, die für jedes der Elemente in der Liste verwendet werden soll. Mit \texttt{Listendatei} wird auf die Datei verwiesen, die die Aufzählung der Elemente enthält. Diese muss sich auf derselben Ebene befinden und als Dateiendung \texttt{.qfl} für \glqq Quick Flow List\grqq\ haben. \texttt{IndexVar} gibt die Variable an, in die die einzelnen Zeilen der Datei eingelesen werden. Diese kann in der gewohnten Notation innerhalb der Frage, den Antworten und den Ausgaben verwendet werden. Durch die optionalen Parameter kann man die Liste auf eine Auswahl von zufällig gewählten \texttt{A} Stück beschränken und diese bei der Abfrage in Gruppen von je \texttt{B} Stück zusammenfassen lassen.
\Beispiel
\begin{verbatim}
/// Eine Liste von Welten wird durchlaufen
//  Anwendungsbeispiel für die Befehlsreferenz
~Set fcount=0; gcont=0
~ForEach Key=F1; List=FEList; IndexVar=idxWelt; Take=4; GroupBy=2;
?F1: Ich mag die $idxWeltwelt.
    #j: Ja
        >> Mag-ich-Welten >> $idxWelt
        ~Set fancount+=1; gcount+=1
    #n: Nein
        >> Sonstige Welten >> $idxWelt
        ~Set gcount+=1
~Execute
>> Auswertung >> Ich mag $fancount von $gcount Welten
\end{verbatim}
Das obige Beispiel wählt aus der nachfolgenden Liste $4$ Elemente per Zufall aus und gruppiert diese auf zwei Eingabeseiten. Die Liste ist dabei als Datei FEList.qfl mit folgendem Inhalt gegeben:
\begin{verbatim}
// Aufzählungen für gesunde Welten
[Obst]
Apfel
Birnen
Bananen
Zitronen
[Gemüse]
Blumenkohl
Kolrabi
Zuchini
Kartoffeln
\end{verbatim}
Die Syntax der Listendateien erlaubt Kommenarzeilen (\verb|//|) und Gruppierungen mittels eckiger Klammern. Die Gruppierungen werden bei der Eingabe als Überschriften ausgegeben (siehe Abschnitt~\ref{Ueberschriften}) und können dazu verwendet werden, den Inhalt der Liste zusätzlich zu gliedern.

Die erste Seite könnte dabei wie folgt aussehen:
\webbox{
\webhead{Vorlage Demo, 32 ForEach}{Eine Liste von Welten wird durchlaufen}
\qsection{Obst}
Ich mag die Birnenwelt. 
\begin{circlist}
\item Ja
\item Nein
\end{circlist}
\qsection{Gemüse}
Ich mag die Kolrabiwelt. 
\begin{circlist}
\item Ja
\item Nein
\end{circlist}
}

Ein praktischer Anwendungsfall dieser Funktion besteht darin, ein abgegrenztes Wissensgebiet mit Hilfe vieler einzelner Reflektionsaussagen zu beschreiben, und diese dann in Form einer solchen Liste bereitzustellen. Eine solche Reflektionsaussage könnte zum Beispiel lauten \glqq Ich weiß wie man einen neuen Kontextmenüeintrag erstellt.\grqq\ Jemand, der feststellen möchte, ob er dieses Wissensgebiet beherrscht, kann sich nun diese Fragen auflisten lassen und den einzelnen Aussagen zustimmen oder nicht. Als Ergebnis bekommt er eine Auswertung über den Grad seines Wissens und eine Auflistung der Aussagen, die seine noch vorhandenen Wissenlücken beschreiben. 

Man beachte, dass hier bewusst darauf verzichtet wird, das Wissen explizit durch Vorgabe entsprechender Auswahlmöglichkeiten abzufragen, um die Erfassung der Fragen, die hier ohne jede Syntaxkenntnis möglich ist, so einfach wie möglich zu halten.

Durch die Möglichkeit, sich nur eine kleine zufällige Teilmenge an Aussagen vorlegen zu lassen, hat man zusätzlich auch ein Instrument, um das Wissengebiet regelmäßig stichprobenartig zu überprüfen.

\newpage
\section{Erklärende Beispiele}
\subsection{Reihenfolge bei Verschachtelungen}
Sowohl über die Verschachtelungen von Fragen (siehe Abschnitt~\ref{Verschachtelungen}), als auch über den Aufruf von Funktionen (siehe Abschnitt~\ref{Funktionen} und \ref{ParametrisierteFunktionen}) werden die Ausgaben in einer verschachtelten Struktur angeordnet, bei der die Aufrufe tieferer Verschachtelungsebenen im Code der Vorlage auch mit einer bestimmten Position, z.B.\ zwischen Ausgabe $A$ und $B$ assoziiert sind. Bei der Erzeugung der Ausgabe wird diese Reihenfolge innerhalb der einzelnen Ausgabegruppe wiederhergestellt:
\Beispiel
\begin{verbatim}
/// Auf die Reihenfolge kommt es an
//  Anwendungsbeispiel für die Befehlsreferenz
>> Die Begrüßung kann beginnen
?F1: Wie soll "Hallo Welt" ausgegeben werden?
    #a1: Verschachtelt
        >> Hallo Welt
        ~Include Schachtelgruss
        >> Zurück in der alten Welt
    #a2: In Großbuchstaben
        >> HALLO WELT
>> Die Begrüßung ist vorbei    
\end{verbatim}
mit Funktionsdatei Schachtelgruss.qff
\begin{verbatim}
>> Start der verschachtelten Begrüßung
?U: Wie soll die verschachtelte Welt begrüßt werden?
    #a1: Mit Hallo
        >> Hallo verschachtelte Welt
    #a2: Mit Aloah
        >> Aloah verschachtelte Welt
>> Ende der verschachtelten Begrüßung    
\end{verbatim}
Beantwortet man die erste Frage mit \glqq Verschachtelt\grqq\ und die zweite mit \glqq Mit Aloah\grqq\ , dann bekommt man folgende Ausgabe:
\webbox{
\webhead{Vorlage Demo, 33 Ausgabreihenfolge}{Auf die Reihenfolge kommt es an}
\begin{numlist}
\item Die Begrüßung kann beginnen
\item Hallo Welt
\item Start der verschachtelten Begrüßung
\item Aloah verschachtelte Welt
\item Ende der verschachtelten Begrüßung
\item Zurück in der alten Welt
\item Die Begrüßung ist vorbei
\end{numlist}
}
Zu beachten ist, dass sich die Reihenfolge bei gruppierten Ausgaben nur innerhalb der Gruppen auswirkt.
\end{document}